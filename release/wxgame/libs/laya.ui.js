(function(A,ja,f){var F=f["static"],h=f["class"],c=f.getset,ka=laya.display.Animation,m=laya.utils.Browser,X=laya.utils.ClassUtils,fa=laya.filters.ColorFilter,Y=laya.components.Component,G=laya.utils.Ease,Z=laya.events.Event,M=laya.display.Graphics,r=laya.utils.Handler,ga=laya.net.HttpRequest,ha=laya.display.Input,x=laya.net.Loader,B=laya.net.LocalStorage,la=laya.maths.Matrix,H=laya.maths.Point,aa=laya.maths.Rectangle,ma=laya.display.Scene,na=laya.utils.SceneUtils,u=laya.display.Sprite,N=laya.display.Text,O=laya.resource.Texture,oa=laya.utils.TimeLine,y=laya.utils.Tween,K=laya.utils.Utils,L=laya.utils.WeakObject;f["interface"]("laya.ui.IBox");f["interface"]("laya.ui.IItem");f["interface"]("laya.ui.ISelect");f["interface"]("laya.ui.IRender");var I=function(){function c(){}h(c,"UIConfig");c.touchScrollEnable=!0;c.mouseWheelEnable=!0;c.showButtons=!0;c.popupBgColor="#000000";c.popupBgAlpha=.5;c.closeDialogOnSide=!0;return c}(),v=function(){function c(){}h(c,"laya.ui.Styles");c.labelColor="#000000";c.buttonStateNum=3;c.scrollBarMinNum=15;c.scrollBarDelayTime=500;F(c,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]);return c}(),w=function(){function c(){}h(c,"laya.ui.UIUtils");c.fillArray=function(d,b,a){d=d.concat();if(b){b=b.split(",");for(var g=0,n=Math.min(d.length,b.length);g<n;g++){var c=b[g];d[g]="true"==c?!0:"false"==c?!1:c;null!=a&&(d[g]=a(c))}}return d};c.toColor=function(d){return K.toHexColor(d)};c.gray=function(d,b){void 0===b&&(b=!0);b?c.addFilter(d,c.grayFilter):c.clearFilter(d,fa)};c.addFilter=function(d,b){var a=d.filters||[];a.push(b);d.filters=a};c.clearFilter=function(d,b){var a=d.filters;if(null!=a&&0<a.length){for(var g=a.length-1;-1<g;g--)f.__typeof(a[g],b)&&a.splice(g,1);d.filters=a}};c._getReplaceStr=function(d){return c.escapeSequence[d]};c.adptString=function(d){return d.replace(/\\(\w)/g,c._getReplaceStr)};c.getBindFun=function(d){var b=c._funMap.get(d);null==b&&(b="(function(data){if(data\x3d\x3dnull)return;with(data){try{\nreturn "+('"'+d+'"').replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"')+"\n}catch(e){}}})",b=f._runScript(b),c._funMap.set(d,b));return b};F(c,["grayFilter",function(){return this.grayFilter=new fa([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new L}]);return c}(),E=function(e){function d(){d.__super.call(this);this._centerY=this._centerX=this._right=this._left=this._bottom=this._top=NaN}h(d,"laya.ui.Widget",e);e=d.prototype;e.onReset=function(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=NaN};e._onEnable=function(){if(this.owner.parent)this._onAdded();else this.owner.once("added",this,this._onAdded)};e._onDisable=function(){this.owner.off("added",this,this._onAdded);this.owner.parent&&this.owner.parent.off("resize",this,this._onParentResize)};e._onAdded=function(){if(this.owner.parent)this.owner.parent.on("resize",this,this._onParentResize);this.resetLayoutX();this.resetLayoutY()};e._onParentResize=function(){(this.resetLayoutX()||this.resetLayoutY())&&this.owner.event("resize")};e.resetLayoutX=function(){var b=this.owner;if(!b)return!1;var a=b.parent;if(a)if(!isNaN(this.centerX))b.x=Math.round(.5*(a.width-b.displayWidth)+this.centerX+b.pivotX*b.scaleX);else if(isNaN(this.left))isNaN(this.right)||(b.x=Math.round(a.width-b.displayWidth-this.right+b.pivotX*b.scaleX));else if(b.x=Math.round(this.left+b.pivotX*b.scaleX),!isNaN(this.right)&&(a=(a._width-this.left-this.right)/(b.scaleX||.01),a!=b.width))return b.width=a,!0;return!1};e.resetLayoutY=function(){var b=this.owner;if(!b)return!1;var a=b.parent;if(a)if(!isNaN(this.centerY))b.y=Math.round(.5*(a.height-b.displayHeight)+this.centerY+b.pivotY*b.scaleY);else if(isNaN(this.top))isNaN(this.bottom)||(b.y=Math.round(a.height-b.displayHeight-this.bottom+b.pivotY*b.scaleY));else if(b.y=Math.round(this.top+b.pivotY*b.scaleY),!isNaN(this.bottom)&&(a=(a._height-this.top-this.bottom)/(b.scaleY||.01),a!=b.height))return b.height=a,!0;return!1};e.resetLayout=function(){this.owner&&(this.resetLayoutX(),this.resetLayoutY())};c(0,e,"centerX",function(){return this._centerX},function(b){this._centerX!=b&&(this._centerX=b,this.resetLayoutX())});c(0,e,"top",function(){return this._top},function(b){this._top!=b&&(this._top=b,this.resetLayoutY())});c(0,e,"bottom",function(){return this._bottom},function(b){this._bottom!=b&&(this._bottom=b,this.resetLayoutY())});c(0,e,"left",function(){return this._left},function(b){this._left!=b&&(this._left=b,this.resetLayoutX())});c(0,e,"right",function(){return this._right},function(b){this._right!=b&&(this._right=b,this.resetLayoutX())});c(0,e,"centerY",function(){return this._centerY},function(b){this._centerY!=b&&(this._centerY=b,this.resetLayoutY())});F(d,["EMPTY",function(){return this.EMPTY=new d}]);return d}(Y);(function(c){function d(){d.__super.call(this)}h(d,"laya.ui.UIEvent",c);d.SHOW_TIP="showtip";d.HIDE_TIP="hidetip";return d})(Z);var J=function(e){function d(){this.autoCacheCmd=!0;this._height=this._width=0;this._sizeGrid=this._source=null;this._isChanged=!1;this._offset=null;d.__super.call(this)}h(d,"laya.ui.AutoBitmap",e);var b=d.prototype;b.destroy=function(){e.prototype.destroy.call(this);this._offset=this._sizeGrid=this._source=null};b._setChanged=function(){this._isChanged||(this._isChanged=!0,f.timer.callLater(this,this.changeSource))};b.changeSource=function(){this._isChanged=!1;var a=this._source;if(a&&a.bitmap){var b=this.width,n=this.height,c=this._sizeGrid,e=a.sourceWidth,f=a.sourceHeight;if(!c||e===b&&f===n)this.clear(),this.drawTexture(a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,b,n);else{this.clear();var q=c[0],p=c[1],t=c[2],h=c[3],c=c[4],k=!1;b==e&&(h=p=0);n==f&&(q=t=0);if(h+p>b){var l=b,k=!0,b=h+p;this.save();this.clipRect(0,0,l,n)}h&&q&&this.drawImage(d.getTexture(a,0,0,h,q),0,0,h,q);p&&q&&this.drawImage(d.getTexture(a,e-p,0,p,q),b-p,0,p,q);h&&t&&this.drawImage(d.getTexture(a,0,f-t,h,t),0,n-t,h,t);p&&t&&this.drawImage(d.getTexture(a,e-p,f-t,p,t),b-p,n-t,p,t);q&&this.drawBitmap(c,d.getTexture(a,h,0,e-h-p,q),h,0,b-h-p,q);t&&this.drawBitmap(c,d.getTexture(a,h,f-t,e-h-p,t),h,n-t,b-h-p,t);h&&this.drawBitmap(c,d.getTexture(a,0,q,h,f-q-t),0,q,h,n-q-t);p&&this.drawBitmap(c,d.getTexture(a,e-p,q,p,f-q-t),b-p,q,p,n-q-t);this.drawBitmap(c,d.getTexture(a,h,q,e-h-p,f-q-t),h,q,b-h-p,n-q-t);k&&this.restore()}this._repaint()}};b.drawBitmap=function(a,b,n,d,c,e){void 0===c&&(c=0);void 0===e&&(e=0);.1>c||.1>e||(!a||b.width==c&&b.height==e?this.drawImage(b,n,d,c,e):this.fillTexture(b,n,d,c,e))};c(0,b,"sizeGrid",function(){return this._sizeGrid},function(a){this._sizeGrid=a;this._setChanged()});c(0,b,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(a){this._width!=a&&(this._width=a,this._setChanged())});c(0,b,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(a){this._height!=a&&(this._height=a,this._setChanged())});c(0,b,"source",function(){return this._source},function(a){a?(this._source=a,this._setChanged()):(this._source=null,this.clear())});d.getTexture=function(a,b,c,d,e){0>=d&&(d=1);0>=e&&(e=1);a.$_GID||(a.$_GID=K.getGID());var g;g&&g._getSource()||(g=O.createFromTexture(a,b,c,d,e));return g};return d}(M),k=function(e){function d(){this._tag=this._toolTip=this._dataSource=null;this._gray=this._disabled=!1;d.__super.call(this);this._anchorY=this._anchorX=NaN;this._widget=E.EMPTY;this.preinitialize();this.createChildren();this.initialize()}h(d,"laya.ui.UIComponent",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._toolTip=this._tag=this._dataSource=null};b.preinitialize=function(){};b.createChildren=function(){};b.initialize=function(){};b.measureWidth=function(){var a=0;this.commitMeasure();for(var b=this.numChildren-1;-1<b;b--){var c=this.getChildAt(b);c._visible&&(a=Math.max(c._x+c.width*c.scaleX,a))}return a};b.commitMeasure=function(){};b.measureHeight=function(){var a=0;this.commitMeasure();for(var b=this.numChildren-1;-1<b;b--){var c=this.getChildAt(b);c._visible&&(a=Math.max(c._y+c.height*c.scaleY,a))}return a};b._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width);isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height);this.event("resize");this._widget!==E.EMPTY&&this._widget.resetLayout()};b.onMouseOver=function(a){f.stage.event("showtip",this._toolTip)};b.onMouseOut=function(a){f.stage.event("hidetip",this._toolTip)};b._getWidget=function(){this._widget===E.EMPTY&&(this._widget=this.addComponent(E));return this._widget};b.onCompResize=function(){this._sizeChanged()};b._childChanged=function(a){this.callLater(this._sizeChanged);e.prototype._childChanged.call(this,a)};c(0,b,"centerY",function(){return this._widget.centerY},function(a){a!=this._widget.centerY&&(this._getWidget().centerY=a)});c(0,b,"width",function(){return this._width?this._width:this.measureWidth()},function(a){f.superGet(u,this,"width")!=a&&(f.superSet(u,this,"width",a),this.callLater(this._sizeChanged))});c(0,b,"bottom",function(){return this._widget.bottom},function(a){a!=this._widget.bottom&&(this._getWidget().bottom=a)});c(0,b,"height",function(){return this._height?this._height:this.measureHeight()},function(a){f.superGet(u,this,"height")!=a&&(f.superSet(u,this,"height",a),this.callLater(this._sizeChanged))});c(0,b,"left",function(){return this._widget.left},function(a){a!=this._widget.left&&(this._getWidget().left=a)});c(0,b,"dataSource",function(){return this._dataSource},function(a){this._dataSource=a;for(var b in this._dataSource)this.hasOwnProperty(b)&&"function"!=typeof this[b]&&(this[b]=this._dataSource[b])});c(0,b,"centerX",function(){return this._widget.centerX},function(a){a!=this._widget.centerX&&(this._getWidget().centerX=a)});c(0,b,"top",function(){return this._widget.top},function(a){a!=this._widget.top&&(this._getWidget().top=a)});c(0,b,"right",function(){return this._widget.right},function(a){a!=this._widget.right&&(this._getWidget().right=a)});c(0,b,"tag",function(){return this._tag},function(a){this._tag=a});c(0,b,"toolTip",function(){return this._toolTip},function(a){this._toolTip!=a&&(this._toolTip=a,null!=a?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))});c(0,b,"gray",function(){return this._gray},function(a){a!==this._gray&&(this._gray=a,w.gray(this,a))});c(0,b,"disabled",function(){return this._disabled},function(a){a!==this._disabled&&(this.gray=this._disabled=a,this.mouseEnabled=!a)});c(0,b,"scaleX",e.prototype._$get_scaleX,function(a){f.superGet(u,this,"scaleX")!=a&&(f.superSet(u,this,"scaleX",a),this.event("resize"))});c(0,b,"scaleY",e.prototype._$get_scaleY,function(a){f.superGet(u,this,"scaleY")!=a&&(f.superSet(u,this,"scaleY",a),this.event("resize"))});c(0,b,"anchorX",function(){return this._anchorX},function(a){this._anchorX!=a&&(this._anchorX=a,this.callLater(this._sizeChanged))});c(0,b,"anchorY",function(){return this._anchorY},function(a){this._anchorY!=a&&(this._anchorY=a,this.callLater(this._sizeChanged))});return d}(u),pa=function(c){function d(){this.lockLayer=null;this.popupEffect=function(b){b.scale(1,1);b._effectTween=y.from(b,{x:f.stage.width/2,y:f.stage.height/2,scaleX:0,scaleY:0},300,G.backOut,r.create(this,this.doOpen,[b]),0,!1,!1)};this.closeEffect=function(b){b._effectTween=y.to(b,{x:f.stage.width/2,y:f.stage.height/2,scaleX:0,scaleY:0},300,G.strongOut,r.create(this,this.doClose,[b]),0,!1,!1)};d.__super.call(this);this.maskLayer=new u;this.popupEffectHandler=new r(this,this.popupEffect);this.closeEffectHandler=new r(this,this.closeEffect);this.mouseEnabled=this.maskLayer.mouseEnabled=!0;this.zOrder=1E3;f.stage.addChild(this);f.stage.on("resize",this,this._onResize);if(I.closeDialogOnSide)this.maskLayer.on("click",this,this._closeOnSide);this._onResize(null)}h(d,"laya.ui.DialogManager",c);c=d.prototype;c._closeOnSide=function(){var b=this.getChildAt(this.numChildren-1);b instanceof laya.ui.Dialog&&b.close()};c.setLockView=function(b){this.lockLayer||(this.lockLayer=new l,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(f.stage.width,f.stage.height));this.lockLayer.removeChildren();b&&(b.centerX=b.centerY=0,this.lockLayer.addChild(b))};c._onResize=function(b){b=this.maskLayer.width=f.stage.width;var a=this.maskLayer.height=f.stage.height;this.lockLayer&&this.lockLayer.size(b,a);this.maskLayer.graphics.clear(!0);this.maskLayer.graphics.drawRect(0,0,b,a,I.popupBgColor);this.maskLayer.alpha=I.popupBgAlpha;for(b=this.numChildren-1;-1<b;b--)a=this.getChildAt(b),a.isPopupCenter&&this._centerDialog(a)};c._centerDialog=function(b){b.x=Math.round((f.stage.width-b.width>>1)+b.pivotX);b.y=Math.round((f.stage.height-b.height>>1)+b.pivotY)};c.open=function(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);a&&this._closeAll();this._clearDialogEffect(b);b.isPopupCenter&&this._centerDialog(b);this.addChild(b);(b.isModal||this._getBit(32))&&f.timer.callLater(this,this._checkMask);g&&null!=b.popupEffect?b.popupEffect.runWith(b):this.doOpen(b);this.event("open")};c._clearDialogEffect=function(b){b._effectTween&&(y.clear(b._effectTween),b._effectTween=null)};c.doOpen=function(b){b.onOpened(b._param)};c.lock=function(b){this.lockLayer&&(b?this.addChild(this.lockLayer):this.lockLayer.removeSelf())};c.close=function(b){this._clearDialogEffect(b);b.isShowEffect&&null!=b.closeEffect?b.closeEffect.runWith([b]):this.doClose(b);this.event("close")};c.doClose=function(b){b.removeSelf();b.isModal&&this._checkMask();b.closeHandler&&b.closeHandler.runWith(b.closeType);b.onClosed(b.closeType);b.autoDestroyAtClosed&&b.destroy()};c.closeAll=function(){this._closeAll();this.event("close")};c._closeAll=function(){for(var b=this.numChildren-1;-1<b;b--){var a=this.getChildAt(b);a&&null!=a.close&&this.doClose(a)}};c.getDialogsByGroup=function(b){for(var a=[],g=this.numChildren-1;-1<g;g--){var c=this.getChildAt(g);c&&c.group===b&&a.push(c)}return a};c.closeByGroup=function(b){for(var a=[],g=this.numChildren-1;-1<g;g--){var c=this.getChildAt(g);c&&c.group===b&&(c.close(),a.push(c))}return a};c._checkMask=function(){this.maskLayer.removeSelf();for(var b=this.numChildren-1;-1<b;b--){var a=this.getChildAt(b);if(a&&a.isModal){this.addChildAt(this.maskLayer,b);break}}};return d}(u),V=function(e){function d(){this._watchMap={};this._dataSource=this._widget=null;this._anchorY=this._anchorX=NaN;this._widget=E.EMPTY;d.__super.call(this)}h(d,"laya.ui.View",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);this._watchMap=null;e.prototype.destroy.call(this,a)};b.changeData=function(a){if(a=this._watchMap[a])for(var b=0,c=a.length;b<c;b++)a[b].exe(this)};b._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width);isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height);this.event("resize")};b._getWidget=function(){this._widget===E.EMPTY&&(this._widget=this.addComponent(E));return this._widget};b.loadUI=function(a){a=d.uiMap[a];d.uiMap&&this.createView(a)};c(0,b,"anchorX",function(){return this._anchorX},function(a){this._anchorX!=a&&(this._anchorX=a,this.callLater(this._sizeChanged))});c(0,b,"centerX",function(){return this._widget.centerX},function(a){a!=this._widget.centerX&&(this._getWidget().centerX=a)});c(0,b,"top",function(){return this._widget.top},function(a){a!=this._widget.top&&(this._getWidget().top=a)});c(0,b,"bottom",function(){return this._widget.bottom},function(a){a!=this._widget.bottom&&(this._getWidget().bottom=a)});c(0,b,"dataSource",function(){return this._dataSource},function(a){this._dataSource=a;for(var b in a){var c=this.getChildByName(b);c instanceof laya.ui.UIComponent?c.dataSource=a[b]:this.hasOwnProperty(b)&&"function"!=typeof this[b]&&(this[b]=a[b])}});c(0,b,"left",function(){return this._widget.left},function(a){a!=this._widget.left&&(this._getWidget().left=a)});c(0,b,"right",function(){return this._widget.right},function(a){a!=this._widget.right&&(this._getWidget().right=a)});c(0,b,"anchorY",function(){return this._anchorY},function(a){this._anchorY!=a&&(this._anchorY=a,this.callLater(this._sizeChanged))});c(0,b,"centerY",function(){return this._widget.centerY},function(a){a!=this._widget.centerY&&(this._getWidget().centerY=a)});d.regComponent=function(a,b){X.regClass(a,b)};d.regViewRuntime=function(a,b){X.regClass(a,b)};d.regUI=function(a,b){f.loader.cacheRes(a,b)};d.uiMap={};d.__init$=function(){X.regShortClassName([qa,z,ra,sa,l,ta,z,ua,P,va,k,Q,wa,C,D,R,xa,ya,ia,za,ea,S,Aa,T,d,Ba,U,Ca,Da,Ea,Fa,u,ka,N,Ga])};return d}(ma);(function(e){function d(){this._$4__texture=null;d.__super.call(this);this._width=this._height=200;var a=new O;if(f.Texture2D)a.bitmap=new f.Texture2D,this.texture=a;else throw Error("WXOpenDataViewer:webgl not found!");}h(d,"laya.ui.WXOpenDataViewer",e);var b=d.prototype;b.onEnable=function(){this.postMsg({type:"display",rate:f.stage.frameRate});A.wx&&A.sharedCanvas&&f.timer.frameLoop(1,this,this._onLoop)};b.onDisable=function(){this.postMsg({type:"undisplay"});f.timer.clear(this,this._onLoop)};b._onLoop=function(){this.texture.bitmap.loadImageSource(A.sharedCanvas)};b._postMsg=function(){var a=new la;a.translate(this.x,this.y);var b=f.stage;a.scale(b._canvasTransform.getScaleX()*this.globalScaleX*b.transform.getScaleX(),b._canvasTransform.getScaleY()*this.globalScaleY*b.transform.getScaleY());this.postMsg({type:"changeMatrix",a:a.a,b:a.b,c:a.c,d:a.d,tx:a.tx,ty:a.ty,w:this.width,h:this.height})};b.postMsg=function(a){A.wx&&A.wx.getOpenDataContext&&A.wx.getOpenDataContext().postMessage(a)};c(0,b,"x",e.prototype._$get_x,function(a){f.superSet(k,this,"x",a);this.callLater(this._postMsg)});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(k,this,"width",a);A.sharedCanvas&&(A.sharedCanvas.width=a);this.callLater(this._postMsg)});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(k,this,"height",a);A.sharedCanvas&&(A.sharedCanvas.height=a);this.callLater(this._postMsg)});c(0,b,"y",e.prototype._$get_y,function(a){f.superSet(k,this,"y",a);this.callLater(this._postMsg)});return d})(k);var l=function(e){function d(){this._bgColor=null;d.__super.call(this)}h(d,"laya.ui.Box",e);var b=d.prototype;f.imps(b,{"laya.ui.IBox":!0});b._onResize=function(a){this.graphics.clear();this.graphics.drawRect(0,0,this.width,this.height,this._bgColor)};c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;for(var b in a){var c=this.getChildByName(b);c?c.dataSource=a[b]:this.hasOwnProperty(b)&&"function"!=typeof this[b]&&(this[b]=a[b])}});c(0,b,"bgColor",function(){return this._bgColor},function(a){(this._bgColor=a)?(this._onResize(null),this.on("resize",this,this._onResize)):(this.graphics.clear(),this.off("resize",this,this._onResize))});return d}(k),z=function(e){function d(a,b){this.toggle=!1;this._strokeColors=this._text=this._bitmap=null;this._state=0;this._selected=!1;this._skin=null;this._autoSize=!0;this._clickHandler=this._sources=null;this._stateChanged=!1;d.__super.call(this);this._labelColors=v.buttonLabelColors;this._stateNum=v.buttonStateNum;void 0===b&&(b="");this.skin=a;this.label=b}h(d,"laya.ui.Button",e);var b=d.prototype;f.imps(b,{"laya.ui.ISelect":!0});b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._bitmap&&this._bitmap.destroy();this._text&&this._text.destroy(a);this._labelColors=this._sources=this._strokeColors=this._clickHandler=this._text=this._bitmap=null};b.createChildren=function(){this.graphics=this._bitmap=new J};b.createText=function(){this._text||(this._text=new N,this._text.overflow="hidden",this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)};b.initialize=function(){1!==this._mouseState&&(this.mouseEnabled=!0,this._setBit(64,!0));this._createListener("mouseover",this,this.onMouse,null,!1,!1);this._createListener("mouseout",this,this.onMouse,null,!1,!1);this._createListener("mousedown",this,this.onMouse,null,!1,!1);this._createListener("mouseup",this,this.onMouse,null,!1,!1);this._createListener("click",this,this.onMouse,null,!1,!1)};b.onMouse=function(a){!1===this.toggle&&this._selected||("click"===a.type?(this.toggle&&(this.selected=!this._selected),this._clickHandler&&this._clickHandler.run()):!this._selected&&(this.state=d.stateMap[a.type]))};b._skinLoaded=function(){this.callLater(this.changeClips);this._setStateChanged();this._sizeChanged();this.event("loaded")};b.changeClips=function(){var a=x.getRes(this._skin);if(a){var b=a.sourceWidth,c=a.sourceHeight/this._stateNum;a.$_GID||(a.$_GID=K.getGID());var d=a.$_GID+"-"+this._stateNum,e=L.I.get(d);K.isOkTextureList(e)||(e=null);if(e)this._sources=e;else{this._sources=[];if(1===this._stateNum)this._sources.push(a);else for(e=0;e<this._stateNum;e++)this._sources.push(O.createFromTexture(a,0,c*e,b,c));L.I.set(d,this._sources)}this._autoSize?(this._bitmap.width=this._width||b,this._bitmap.height=this._height||c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=b)}else console.log("lose skin",this._skin)};b.measureWidth=function(){this.runCallLater(this.changeClips);if(this._autoSize)return this._bitmap.width;this.runCallLater(this.changeState);return this._bitmap.width+(this._text?this._text.width:0)};b.measureHeight=function(){this.runCallLater(this.changeClips);return this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height};b.changeState=function(){this._stateChanged=!1;this.runCallLater(this.changeClips);var a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[a]);this.label&&(this._text.color=this._labelColors[a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[a]))};b._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))};c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)?x.getRes(a)?this._skinLoaded():f.loader.load(this._skin,r.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});c(0,b,"labelPadding",function(){this.createText();return this._text.padding.join(",")},function(a){this.createText();this._text.padding=w.fillArray(v.labelPadding,a,Number)});c(0,b,"state",function(){return this._state},function(a){this._state!=a&&(this._state=a,this._setStateChanged())});c(0,b,"text",function(){this.createText();return this._text});c(0,b,"stateNum",function(){return this._stateNum},function(a){"string"==typeof a&&(a=parseInt(a));this._stateNum!=a&&(this._stateNum=1>a?1:3<a?3:a,this.callLater(this.changeClips))});c(0,b,"label",function(){return this._text?this._text.text:null},function(a){if(this._text||a)this.createText(),this._text.text!=a&&(a&&!this._text.parent&&this.addChild(this._text),this._text.text=(a+"").replace(/\\n/g,"\n"),this._setStateChanged())});c(0,b,"labelSize",function(){this.createText();return this._text.fontSize},function(a){this.createText();this._text.fontSize=a});c(0,b,"selected",function(){return this._selected},function(a){this._selected!=a&&(this.state=(this._selected=a)?2:0,this.event("change"))});c(0,b,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(a){this._strokeColors=w.fillArray(v.buttonLabelColors,a,String);this._setStateChanged()});c(0,b,"labelColors",function(){return this._labelColors.join(",")},function(a){this._labelColors=w.fillArray(v.buttonLabelColors,a,String);this._setStateChanged()});c(0,b,"labelStroke",function(){this.createText();return this._text.stroke},function(a){this.createText();this._text.stroke=a});c(0,b,"labelStrokeColor",function(){this.createText();return this._text.strokeColor},function(a){this.createText();this._text.strokeColor=a});c(0,b,"labelBold",function(){this.createText();return this._text.bold},function(a){this.createText();this._text.bold=a});c(0,b,"labelFont",function(){this.createText();return this._text.font},function(a){this.createText();this._text.font=a});c(0,b,"labelAlign",function(){this.createText();return this._text.align},function(a){this.createText();this._text.align=a});c(0,b,"clickHandler",function(){return this._clickHandler},function(a){this._clickHandler=a});c(0,b,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(a){this._bitmap.sizeGrid=w.fillArray(v.defaultSizeGrid,a,Number)});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(k,this,"width",a);this._autoSize&&(this._bitmap.width=a,this._text&&(this._text.width=a))});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(k,this,"height",a);this._autoSize&&(this._bitmap.height=a,this._text&&(this._text.height=a))});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.label=a+"":f.superSet(k,this,"dataSource",a)});c(0,b,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(a){this._bitmap._offset=a?w.fillArray([1,1],a,Number):[]});F(d,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]);return d}(k),C=function(e){function d(a){this._group=this._skin=this._bitmap=null;d.__super.call(this);this.skin=a}h(d,"laya.ui.Image",e);var b=d.prototype;b.destroy=function(a){e.prototype.destroy.call(this,!0);this._bitmap&&this._bitmap.destroy();this._bitmap=null};b.dispose=function(){this.destroy(!0);f.loader.clearRes(this._skin)};b.createChildren=function(){this.graphics=this._bitmap=new J;this._bitmap.autoCacheCmd=!1};b.setSource=function(a,b){a===this._skin&&b&&(this.source=b,this.onCompResize())};b.measureWidth=function(){return this._bitmap.width};b.measureHeight=function(){return this._bitmap.height};c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"string"==typeof a?this.skin=a:f.superSet(k,this,"dataSource",a)});c(0,b,"source",function(){return this._bitmap.source},function(a){this._bitmap&&(this._bitmap.source=a,this.event("loaded"),this.repaint())});c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)?(a=x.getRes(a))?(this.source=a,this.onCompResize()):f.loader.load(this._skin,r.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group):this.source=null)});c(0,b,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(a){this._bitmap.sizeGrid=w.fillArray(v.defaultSizeGrid,a,Number)});c(0,b,"group",function(){return this._group},function(a){a&&this._skin&&x.setGroup(this._skin,a);this._group=a});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(k,this,"width",a);this._bitmap.width=0==a?1E-7:a});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(k,this,"height",a);this._bitmap.height=0==a?1E-7:a});return d}(k),D=function(e){function d(a){this._tf=null;d.__super.call(this);void 0===a&&(a="");this.text=a}h(d,"laya.ui.Label",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._tf=null};b.createChildren=function(){this.addChild(this._tf=new N)};b.changeText=function(a){this._tf.changeText(a)};b.measureWidth=function(){return this._tf.width};b.measureHeight=function(){return this._tf.height};c(0,b,"padding",function(){return this._tf.padding.join(",")},function(a){this._tf.padding=w.fillArray(v.labelPadding,a,Number)});c(0,b,"bold",function(){return this._tf.bold},function(a){this._tf.bold=a});c(0,b,"align",function(){return this._tf.align},function(a){this._tf.align=a});c(0,b,"text",function(){return this._tf.text},function(a){if(this._tf.text!=a&&(a&&(a=w.adptString(a+"")),this._tf.text=a,this.event("change"),!this._width||!this._height))this.onCompResize()});c(0,b,"italic",function(){return this._tf.italic},function(a){this._tf.italic=a});c(0,b,"wordWrap",function(){return this._tf.wordWrap},function(a){this._tf.wordWrap=a});c(0,b,"font",function(){return this._tf.font},function(a){this._tf.font=a});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.text=a+"":f.superSet(k,this,"dataSource",a)});c(0,b,"color",function(){return this._tf.color},function(a){this._tf.color=a});c(0,b,"valign",function(){return this._tf.valign},function(a){this._tf.valign=a});c(0,b,"leading",function(){return this._tf.leading},function(a){this._tf.leading=a});c(0,b,"fontSize",function(){return this._tf.fontSize},function(a){this._tf.fontSize=a});c(0,b,"bgColor",function(){return this._tf.bgColor},function(a){this._tf.bgColor=a});c(0,b,"borderColor",function(){return this._tf.borderColor},function(a){this._tf.borderColor=a});c(0,b,"stroke",function(){return this._tf.stroke},function(a){this._tf.stroke=a});c(0,b,"strokeColor",function(){return this._tf.strokeColor},function(a){this._tf.strokeColor=a});c(0,b,"textField",function(){return this._tf});c(0,b,"width",function(){return this._width||this._tf.text?f.superGet(k,this,"width"):0},function(a){f.superSet(k,this,"width",a);this._tf.width=a});c(0,b,"height",function(){return this._height||this._tf.text?f.superGet(k,this,"height"):0},function(a){f.superSet(k,this,"height",a);this._tf.height=a});c(0,b,"overflow",function(){return this._tf.overflow},function(a){this._tf.overflow=a});c(0,b,"underline",function(){return this._tf.underline},function(a){this._tf.underline=a});c(0,b,"underlineColor",function(){return this._tf.underlineColor},function(a){this._tf.underlineColor=a});return d}(k),va=function(e){function d(a,b){this._visibleNum=6;this._list=this._button=null;this._isOpen=!1;this._itemSize=12;this._labels=[];this._selectedIndex=-1;this._selectHandler=null;this._listHeight=this._itemHeight=NaN;this._itemChanged=this._listChanged=!1;this._scrollBarSkin=null;this._isCustomList=!1;this.itemRender=null;d.__super.call(this);this._itemColors=v.comboBoxItemColors;this.skin=a;this.labels=b}h(d,"laya.ui.ComboBox",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._button&&this._button.destroy(a);this._list&&this._list.destroy(a);this._selectHandler=this._labels=this._itemColors=this._list=this._button=null};b.createChildren=function(){this.addChild(this._button=new z);this._button.text.align="left";this._button.labelPadding="0,0,0,5";this._button.on("mousedown",this,this.onButtonMouseDown)};b._createList=function(){this._list=new R;this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin);this._setListEvent(this._list)};b._setListEvent=function(a){this._list.selectEnable=!0;this._list.on("mousedown",this,this.onListDown);this._list.mouseHandler=r.create(this,this.onlistItemMouse,null,!1);if(this._list.scrollBar)this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)};b.onListDown=function(a){a.stopPropagation()};b.onScrollBarDown=function(a){a.stopPropagation()};b.onButtonMouseDown=function(a){this.callLater(this.switchTo,[!this._isOpen])};b.measureWidth=function(){return this._button.width};b.measureHeight=function(){return this._button.height};b.changeList=function(){this._listChanged=!1;var a=this.width-2,b=this._itemColors[2];this._itemHeight=this._itemSize+6;this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:a,height:this._itemHeight,fontSize:this._itemSize,color:b}}]};this._list.repeatY=this._visibleNum;this._list.refresh()};b.onlistItemMouse=function(a,b){var g=a.type;if("mouseover"===g||"mouseout"===g){if(!this._isCustomList){var c=this._list.getCell(b);c&&(c=c.getChildByName("label"))&&("mouseover"===g?(c.bgColor=this._itemColors[0],c.color=this._itemColors[1]):(c.bgColor=null,c.color=this._itemColors[2]))}}else"click"===g&&(this.selectedIndex=b,this.isOpen=!1)};b.switchTo=function(a){this.isOpen=a};b.changeOpen=function(){this.isOpen=!this._isOpen};b.changeItem=function(){this._itemChanged=!1;this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight;if(!this._isCustomList){var a=this._list.graphics;a.clear(!0);a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var a=this._list.array||[],b=a.length=0,c=this._labels.length;b<c;b++)a.push({label:this._labels[b]});this._list.height=this._listHeight;this._list.array=a};b.changeSelected=function(){this._button.label=this.selectedLabel};b._onStageMouseWheel=function(a){this._list&&!this._list.contains(a.target)&&this.removeList(null)};b.removeList=function(a){f.stage.off("mousedown",this,this.removeList);f.stage.off("mousewheel",this,this._onStageMouseWheel);this.isOpen=!1};c(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this._selectedIndex=a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Z.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))});c(0,b,"skin",function(){return this._button.skin},function(a){this._button.skin!=a&&(this._button.skin=a,this._listChanged=!0)});c(0,b,"visibleNum",function(){return this._visibleNum},function(a){this._visibleNum=a;this._listChanged=!0});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(k,this,"width",a);this._button.width=this._width;this._listChanged=this._itemChanged=!0});c(0,b,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(a){this.selectedIndex=this._labels.indexOf(a)});c(0,b,"labels",function(){return this._labels.join(",")},function(a){0<this._labels.length&&(this.selectedIndex=-1);a?this._labels=a.split(","):this._labels.length=0;this._itemChanged=!0});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(k,this,"height",a);this._button.height=this._height});c(0,b,"selectHandler",function(){return this._selectHandler},function(a){this._selectHandler=a});c(0,b,"labelBold",function(){return this._button.text.bold},function(a){this._button.text.bold=a});c(0,b,"itemColors",function(){return String(this._itemColors)},function(a){this._itemColors=w.fillArray(this._itemColors,a,String);this._listChanged=!0});c(0,b,"itemSize",function(){return this._itemSize},function(a){this._itemSize=a;this._listChanged=!0});c(0,b,"scrollBar",function(){return this.list.scrollBar});c(0,b,"isOpen",function(){return this._isOpen},function(a){if(this._isOpen!=a)if(this._isOpen=a,this._button.selected=this._isOpen){this._list||this._createList();this._listChanged&&!this._isCustomList&&this.changeList();this._itemChanged&&this.changeItem();a=this.localToGlobal(H.TEMP.setTo(0,0));var b=a.y+this._button.height,b=b+this._listHeight<=f.stage.height?b:a.y-this._listHeight;this._list.pos(a.x,b);this._list.zOrder=1001;f._currentStage.addChild(this._list);f.stage.once("mousedown",this,this.removeList);f.stage.on("mousewheel",this,this._onStageMouseWheel);this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()});c(0,b,"scrollBarSkin",function(){return this._scrollBarSkin},function(a){this._scrollBarSkin=a});c(0,b,"sizeGrid",function(){return this._button.sizeGrid},function(a){this._button.sizeGrid=a});c(0,b,"button",function(){return this._button});c(0,b,"list",function(){this._list||this._createList();return this._list},function(a){a&&(a.removeSelf(),this._isCustomList=!0,this._list=a,this._setListEvent(a),this._itemHeight=a.getCell(0).height+a.spaceY)});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.selectedIndex=parseInt(a):a instanceof Array?this.labels=a.join(","):f.superSet(k,this,"dataSource",a)});c(0,b,"labelColors",function(){return this._button.labelColors},function(a){this._button.labelColors!=a&&(this._button.labelColors=a)});c(0,b,"labelPadding",function(){return this._button.text.padding.join(",")},function(a){this._button.text.padding=w.fillArray(v.labelPadding,a,Number)});c(0,b,"labelSize",function(){return this._button.text.fontSize},function(a){this._button.text.fontSize=a});c(0,b,"labelFont",function(){return this._button.text.font},function(a){this._button.text.font=a});c(0,b,"stateNum",function(){return this._button.stateNum},function(a){this._button.stateNum=a});return d}(k);(function(e){function d(){this._defaultTipHandler=this._tipText=this._tipBox=null;d.__super.call(this);this._tipBox=new k;this._tipBox.addChild(this._tipText=new N);this._tipText.x=this._tipText.y=5;this._tipText.color=d.tipTextColor;this._defaultTipHandler=this._showDefaultTip;f.stage.on("showtip",this,this._onStageShowTip);f.stage.on("hidetip",this,this._onStageHideTip);this.zOrder=1100}h(d,"laya.ui.TipManager",e);e=d.prototype;e._onStageHideTip=function(b){f.timer.clear(this,this._showTip);this.closeAll();this.removeSelf()};e._onStageShowTip=function(b){f.timer.once(d.tipDelay,this,this._showTip,[b],!0)};e._showTip=function(b){"string"==typeof b?(b=String(b))&&this._defaultTipHandler(b):b instanceof laya.utils.Handler?b.run():"function"==typeof b&&b.apply();f.stage.on("mousemove",this,this._onStageMouseMove);f.stage.on("mousedown",this,this._onStageMouseDown);this._onStageMouseMove(null)};e._onStageMouseDown=function(b){this.closeAll()};e._onStageMouseMove=function(b){this._showToStage(this,d.offsetX,d.offsetY)};e._showToStage=function(b,a,g){void 0===a&&(a=0);void 0===g&&(g=0);var c=b.getBounds();b.x=f.stage.mouseX+a;b.y=f.stage.mouseY+g;b._x+c.width>f.stage.width&&(b.x-=c.width+a);b._y+c.height>f.stage.height&&(b.y-=c.height+g)};e.closeAll=function(){f.timer.clear(this,this._showTip);f.stage.off("mousemove",this,this._onStageMouseMove);f.stage.off("mousedown",this,this._onStageMouseDown);this.removeChildren()};e.showDislayTip=function(b){this.addChild(b);this._showToStage(this);f._currentStage.addChild(this)};e._showDefaultTip=function(b){this._tipText.text=b;b=this._tipBox.graphics;b.clear(!0);b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,d.tipBackColor);this.addChild(this._tipBox);this._showToStage(this);f._currentStage.addChild(this)};c(0,e,"defaultTipHandler",function(){return this._defaultTipHandler},function(b){this._defaultTipHandler=b});d.offsetX=10;d.offsetY=15;d.tipTextColor="#ffffff";d.tipBackColor="#111111";d.tipDelay=200;return d})(k);var P=function(e){function d(a,b,c){this._skin=this._bitmap=this._sources=null;this._clipY=this._clipX=1;this._clipHeight=this._clipWidth=0;this._autoPlay=!1;this._interval=50;this._complete=null;this._isPlaying=!1;this._index=0;this._clipChanged=!1;this._group=null;this._toIndex=-1;d.__super.call(this);void 0===b&&(b=1);void 0===c&&(c=1);this._clipX=b;this._clipY=c;this.skin=a}h(d,"laya.ui.Clip",e);var b=d.prototype;b.destroy=function(a){e.prototype.destroy.call(this,!0);this._bitmap&&this._bitmap.destroy();this._sources=this._bitmap=null};b.dispose=function(){this.destroy(!0);f.loader.clearRes(this._skin)};b.createChildren=function(){this.graphics=this._bitmap=new J};b._onDisplay=function(a){this._isPlaying?this._getBit(128)?this.play():this.stop():this._autoPlay&&this.play()};b._skinLoaded=function(){this._setClipChanged();this._sizeChanged();this.event("loaded")};b.changeClip=function(){this._clipChanged=!1;if(this._skin){var a=x.getRes(this._skin);a?this.loadComplete(this._skin,a):f.loader.load(this._skin,r.create(this,this.loadComplete,[this._skin]))}};b.loadComplete=function(a,b){if(a===this._skin&&b){var g=this._clipWidth||Math.ceil(b.sourceWidth/this._clipX),c=this._clipHeight||Math.ceil(b.sourceHeight/this._clipY),d=this._skin+g+c,e=L.I.get(d);K.isOkTextureList(e)||(e=null);if(e)this._sources=e;else{this._sources=[];for(e=0;e<this._clipY;e++)for(var f=0;f<this._clipX;f++)this._sources.push(O.createFromTexture(b,g*f,c*e,g,c));L.I.set(d,this._sources)}this.index=this._index;this.event("loaded");this.onCompResize()}};b.measureWidth=function(){this.runCallLater(this.changeClip);return this._bitmap.width};b.measureHeight=function(){this.runCallLater(this.changeClip);return this._bitmap.height};b.play=function(a,b){void 0===a&&(a=0);void 0===b&&(b=-1);this._isPlaying=!0;this.index=a;this._toIndex=b;this._index++;f.timer.loop(this.interval,this,this._loop);this.on("display",this,this._onDisplay);this.on("undisplay",this,this._onDisplay)};b._loop=function(){this._visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)};b.stop=function(){this._isPlaying=!1;f.timer.clear(this,this._loop);this.event("complete")};b._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))};c(0,b,"interval",function(){return this._interval},function(a){this._interval!=a&&(this._interval=a,this._isPlaying&&this.play())});c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)?x.getRes(a)?this._skinLoaded():f.loader.load(this._skin,r.create(this,this._skinLoaded),null,"image",1):this._bitmap.source=null)});c(0,b,"sources",function(){return this._sources},function(a){this._sources=a;this.index=this._index;this.event("loaded")});c(0,b,"clipX",function(){return this._clipX},function(a){this._clipX=a||1;this._setClipChanged()});c(0,b,"clipY",function(){return this._clipY},function(a){this._clipY=a||1;this._setClipChanged()});c(0,b,"total",function(){this.runCallLater(this.changeClip);return this._sources?this._sources.length:0});c(0,b,"clipWidth",function(){return this._clipWidth},function(a){this._clipWidth=a;this._setClipChanged()});c(0,b,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(a){this._bitmap.sizeGrid=w.fillArray(v.defaultSizeGrid,a,Number)});c(0,b,"group",function(){return this._group},function(a){a&&this._skin&&x.setGroup(this._skin,a);this._group=a});c(0,b,"clipHeight",function(){return this._clipHeight},function(a){this._clipHeight=a;this._setClipChanged()});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(k,this,"width",a);this._bitmap.width=a});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(k,this,"height",a);this._bitmap.height=a});c(0,b,"index",function(){return this._index},function(a){this._index=a;this._bitmap&&this._sources&&(this._bitmap.source=this._sources[a]);this.event("change")});c(0,b,"autoPlay",function(){return this._autoPlay},function(a){this._autoPlay!=a&&((this._autoPlay=a)?this.play():this.stop())});c(0,b,"isPlaying",function(){return this._isPlaying},function(a){this._isPlaying=a});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.index=parseInt(a):f.superSet(k,this,"dataSource",a)});c(0,b,"bitmap",function(){return this._bitmap});return d}(k),sa=function(e){function d(){this.changeHandler=null;this._gridSize=11;this._bgColor="#ffffff";this._inputColor=this._borderColor="#000000";this._inputBgColor="#efefef";this._colorButton=this._colorInput=this._colorBlock=this._colorTiles=this._colorPanel=null;this._colors=[];this._selectedColor="#000000";this._panelChanged=!1;d.__super.call(this)}h(d,"laya.ui.ColorPicker",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._colorPanel&&this._colorPanel.destroy(a);this._colorButton&&this._colorButton.destroy(a);this.changeHandler=this._colors=this._colorButton=this._colorInput=this._colorBlock=this._colorTiles=this._colorPanel=null};b.createChildren=function(){this.addChild(this._colorButton=new z);this._colorPanel=new l;this._colorPanel.size(230,166);this._colorPanel.addChild(this._colorTiles=new u);this._colorPanel.addChild(this._colorBlock=new u);this._colorPanel.addChild(this._colorInput=new ha)};b.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick);this._colorBlock.pos(5,5);this._colorInput.pos(60,5);this._colorInput.size(60,20);this._colorInput.on("change",this,this.onColorInputChange);this._colorInput.on("keydown",this,this.onColorFieldKeyDown);this._colorTiles.pos(5,30);this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove);this._colorTiles.on("click",this,this.onColorTilesClick);this._colorTiles.size(20*this._gridSize,12*this._gridSize);this._colorPanel.on("mousedown",this,this.onPanelMouseDown);this.bgColor=this._bgColor};b.onPanelMouseDown=function(a){a.stopPropagation()};b.changePanel=function(){this._panelChanged=!1;var a=this._colorPanel.graphics;a.clear(!0);a.drawRect(0,0,230,166,this._bgColor,this._borderColor);this.drawBlock(this._selectedColor);this._colorInput.borderColor=this._borderColor;this._colorInput.bgColor=this._inputBgColor;this._colorInput.color=this._inputColor;a=this._colorTiles.graphics;a.clear(!0);for(var b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],c=0;12>c;c++)for(var d=0;20>d;d++){var e=w.toColor(0===d?b[c]:1===d?0:51*(((3*c+d/6)%3<<0)+3*(c/6<<0))<<16|d%6*51<<8|(c<<0)%6*51);this._colors.push(e);a.drawRect(d*this._gridSize,c*this._gridSize,this._gridSize,this._gridSize,e,"#000000")}};b.onColorButtonClick=function(a){this._colorPanel.parent?this.close():this.open()};b.open=function(){var a=this.localToGlobal(new H),b=a.x+this._colorPanel.width<=f.stage.width?a.x:f.stage.width-this._colorPanel.width,c=a.y+this._colorButton.height,c=c+this._colorPanel.height<=f.stage.height?c:a.y-this._colorPanel.height;this._colorPanel.pos(b,c);this._colorPanel.zOrder=1001;f._currentStage.addChild(this._colorPanel);f.stage.on("mousedown",this,this.removeColorBox)};b.close=function(){f.stage.off("mousedown",this,this.removeColorBox);this._colorPanel.removeSelf()};b.removeColorBox=function(a){this.close()};b.onColorFieldKeyDown=function(a){13==a.keyCode&&(this.selectedColor=this._colorInput.text?this._colorInput.text:null,this.close(),a.stopPropagation())};b.onColorInputChange=function(a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")};b.onColorTilesClick=function(a){this.selectedColor=this.getColorByMouse();this.close()};b.onColorTilesMouseMove=function(a){this._colorInput.focus=!1;a=this.getColorByMouse();this._colorInput.text=a;this.drawBlock(a)};b.getColorByMouse=function(){var a=this._colorTiles.getMousePoint();return this._colors[20*Math.floor(a.y/this._gridSize)+Math.floor(a.x/this._gridSize)]};b.drawBlock=function(a){var b=this._colorBlock.graphics;b.clear(!0);b.drawRect(0,0,50,20,a?a:"#ffffff",this._borderColor);a||b.drawLine(0,0,50,20,"#ff0000")};b.changeColor=function(){var a=this.graphics;a.clear(!0);a.drawRect(0,0,this._colorButton.width,this._colorButton.height,this._selectedColor||"#000000")};b._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))};c(0,b,"inputBgColor",function(){return this._inputBgColor},function(a){this._inputBgColor=a;this._setPanelChanged()});c(0,b,"selectedColor",function(){return this._selectedColor},function(a){this._selectedColor!=a&&(this._selectedColor=this._colorInput.text=a,this.drawBlock(a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Z.EMPTY.setTo("change",this,this)))});c(0,b,"skin",function(){return this._colorButton.skin},function(a){this._colorButton.once("loaded",this,this.changeColor);this._colorButton.skin=a});c(0,b,"bgColor",function(){return this._bgColor},function(a){this._bgColor=a;this._setPanelChanged()});c(0,b,"borderColor",function(){return this._borderColor},function(a){this._borderColor=a;this._setPanelChanged()});c(0,b,"inputColor",function(){return this._inputColor},function(a){this._inputColor=a;this._setPanelChanged()});return d}(k),ya=function(e){function d(a){this._skin=this._bar=this._bg=this.changeHandler=null;this._value=.5;d.__super.call(this);this.skin=a}h(d,"laya.ui.ProgressBar",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._bg&&this._bg.destroy(a);this._bar&&this._bar.destroy(a);this.changeHandler=this._bg=this._bar=null};b.createChildren=function(){this.addChild(this._bg=new C);this.addChild(this._bar=new C);this._bar._bitmap.autoCacheCmd=!1};b._skinLoaded=function(){this._bg.skin=this._skin;this._bar.skin=this._skin.replace(".png","$bar.png");this.callLater(this.changeValue);this._sizeChanged();this.event("loaded")};b.measureWidth=function(){return this._bg.width};b.measureHeight=function(){return this._bg.height};b.changeValue=function(){if(this.sizeGrid){var a=this.sizeGrid.split(","),b=Number(a[3]),a=Number(a[1]);this._bar.width=b+a+(this.width-b-a)*this._value;this._bar.visible=this._bar.width>b+a}else this._bar.width=this.width*this._value};c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.value=Number(a):f.superSet(k,this,"dataSource",a)});c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?f.loader.load(this._skin,r.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(k,this,"height",a);this._bg.height=this._height;this._bar.height=this._height});c(0,b,"bar",function(){return this._bar});c(0,b,"value",function(){return this._value},function(a){this._value!=a&&(this._value=a=1<a?1:0>a?0:a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(a))});c(0,b,"bg",function(){return this._bg});c(0,b,"sizeGrid",function(){return this._bg.sizeGrid},function(a){this._bg.sizeGrid=this._bar.sizeGrid=a});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(k,this,"width",a);this._bg.width=this._width;this.callLater(this.changeValue)});return d}(k),ea=function(e){function d(a){this.rollRatio=.97;this.changeHandler=null;this.scaleBar=!0;this.autoHide=!1;this.elasticDistance=0;this.elasticBackTime=500;this.slider=this.downButton=this.upButton=null;this._scrollSize=1;this._skin=null;this._thumbPercent=1;this._lastPoint=this._target=null;this._lastOffset=0;this._isElastic=this._checkElastic=!1;this._value=NaN;this._hide=!1;this._clickOnly=!0;this.triggerUpDragLimit=this.triggerDownDragLimit=this.isLockedFun=this._offsets=null;d.__super.call(this);this._showButtons=I.showButtons;this._touchScrollEnable=I.touchScrollEnable;this._mouseWheelEnable=I.mouseWheelEnable;this.skin=a;this.max=1}h(d,"laya.ui.ScrollBar",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);this.stopScroll();this.target=null;e.prototype.destroy.call(this,a);this.upButton&&this.upButton.destroy(a);this.downButton&&this.downButton.destroy(a);this.slider&&this.slider.destroy(a);this._offsets=this.changeHandler=this.slider=this.upButton=this.downButton=null};b.createChildren=function(){this.addChild(this.slider=new S);this.addChild(this.upButton=new z);this.addChild(this.downButton=new z)};b.initialize=function(){this.slider.showLabel=!1;this.slider.tick=0;this.slider.on("change",this,this.onSliderChange);this.slider.setSlider(0,0,0);this.upButton.on("mousedown",this,this.onButtonMouseDown);this.downButton.on("mousedown",this,this.onButtonMouseDown)};b.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)};b.onButtonMouseDown=function(a){a=a.currentTarget===this.upButton;this.slide(a);f.timer.once(v.scrollBarDelayTime,this,this.startLoop,[a]);f.stage.once("mouseup",this,this.onStageMouseUp)};b.startLoop=function(a){f.timer.frameLoop(1,this,this.slide,[a])};b.slide=function(a){this.value=a?this.value-this._scrollSize:this.value+this._scrollSize};b.onStageMouseUp=function(a){f.timer.clear(this,this.startLoop);f.timer.clear(this,this.slide)};b._skinLoaded=function(){this.slider.skin=this._skin;this.callLater(this.changeScrollBar);this._sizeChanged();this.event("loaded")};b.changeScrollBar=function(){this.upButton.visible=this._showButtons;if(this.downButton.visible=this._showButtons)this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png");this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0;this.resetPositions();this.repaint()};b._sizeChanged=function(){e.prototype._sizeChanged.call(this);this.repaint();this.resetPositions();this.event("change");this.changeHandler&&this.changeHandler.runWith(this.value)};b.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0);this.resetButtonPosition()};b.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider._y+this.slider.height:this.downButton.x=this.slider._x+this.slider.width};b.measureWidth=function(){return this.slider.isVertical?this.slider.width:100};b.measureHeight=function(){return this.slider.isVertical?100:this.slider.height};b.setScroll=function(a,b,c){this.runCallLater(this._sizeChanged);this.slider.setSlider(a,b,c);this.slider.bar.visible=0<b;!this._hide&&this.autoHide&&(this.visible=!1)};b.onTargetMouseWheel=function(a){this.value-=a.delta*this._scrollSize;this.target=this._target};b.onTargetMouseDown=function(a){if(!this.isLockedFun||this.isLockedFun(a))this.event("end"),this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new H),this._lastPoint.setTo(f.stage.mouseX,f.stage.mouseY),f.timer.clear(this,this.tweenMove),y.clearTween(this),f.stage.once("mouseup",this,this.onStageMouseUp2),f.stage.once("mouseout",this,this.onStageMouseUp2),f.timer.frameLoop(1,this,this.loop)};b.startDragForce=function(){this._clickOnly=!0;this._lastOffset=0;this._checkElastic=!1;this._lastPoint||(this._lastPoint=new H);this._lastPoint.setTo(f.stage.mouseX,f.stage.mouseY);f.timer.clear(this,this.tweenMove);y.clearTween(this);f.stage.once("mouseup",this,this.onStageMouseUp2);f.stage.once("mouseout",this,this.onStageMouseUp2);f.timer.frameLoop(1,this,this.loop)};b.cancelDragOp=function(){f.stage.off("mouseup",this,this.onStageMouseUp2);f.stage.off("mouseout",this,this.onStageMouseUp2);f.timer.clear(this,this.tweenMove);f.timer.clear(this,this.loop);this._target.mouseEnabled=!0};b.checkTriggers=function(a){void 0===a&&(a=!1);return 0<=this.value&&0>=this.value-this._lastOffset&&this.triggerDownDragLimit&&this.triggerDownDragLimit(a)?(this.cancelDragOp(),this.value=0,!0):this.value<=this.max&&this.value-this._lastOffset>=this.max&&this.triggerUpDragLimit&&this.triggerUpDragLimit(a)?(this.cancelDragOp(),this.value=this.max,!0):!1};b.startTweenMoveForce=function(a){this._lastOffset=a;f.timer.frameLoop(1,this,this.tweenMove,[200])};b.loop=function(){var a=f.stage.mouseY,b=f.stage.mouseX;this._lastOffset=this.isVertical?a-this._lastPoint.y:b-this._lastPoint.x;if(this._clickOnly)if(1<Math.abs(this._lastOffset*(this.isVertical?f.stage._canvasTransform.getScaleY():f.stage._canvasTransform.getScaleX()))){this._clickOnly=!1;if(this.checkTriggers())return;this._offsets||(this._offsets=[]);this._offsets.length=0;this._target.mouseEnabled=!1;!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0);this.event("start")}else return;else if(this.checkTriggers())return;this._offsets.push(this._lastOffset);this._lastPoint.x=b;this._lastPoint.y=a;0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||0>this._lastOffset&&this._value>=this.max?this._checkElastic=this._isElastic=!0:this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?0<this._lastOffset?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value>=this.min&&(this._checkElastic=!1)):this._value>=this.max&&(0>this._lastOffset?this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value<=this.max&&(this._checkElastic=!1))):this.value-=this._lastOffset)};b.onStageMouseUp2=function(a){f.stage.off("mouseup",this,this.onStageMouseUp2);f.stage.off("mouseout",this,this.onStageMouseUp2);f.timer.clear(this,this.loop);if(!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?y.to(this,{value:this.min},this.elasticBackTime,G.sineOut,r.create(this,this.elasticOver)):this._value>this.max&&y.to(this,{value:this.max},this.elasticBackTime,G.sineOut,r.create(this,this.elasticOver));else if(this._offsets){1>this._offsets.length&&(this._offsets[0]=this.isVertical?f.stage.mouseY-this._lastPoint.y:f.stage.mouseX-this._lastPoint.x);a=0;for(var b=Math.min(this._offsets.length,3),c=0;c<b;c++)a+=this._offsets[this._offsets.length-1-c];this._lastOffset=a/b;a=Math.abs(this._lastOffset);2>a?this.event("end"):(250<a&&(this._lastOffset=0<this._lastOffset?250:-250),f.timer.frameLoop(1,this,this.tweenMove,[Math.round(Math.abs(this._lastOffset/150*this.elasticDistance))]))}};b.elasticOver=function(){this._isElastic=!1;!this.hide&&this.autoHide&&y.to(this,{alpha:0},500);this.event("end")};b.tweenMove=function(a){this._lastOffset*=this.rollRatio;this.checkTriggers(!0)||(0<a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,a=.5*-(this.min-a-this.value),this._lastOffset>a&&(this._lastOffset=a)):0>this._lastOffset&&this.value>=this.max&&(this._isElastic=!0,a=.5*-(this.max+a-this.value),this._lastOffset<a&&(this._lastOffset=a))),this.value-=this._lastOffset,.1>Math.abs(this._lastOffset)&&(f.timer.clear(this,this.tweenMove),this._isElastic?this._value<this.min?y.to(this,{value:this.min},this.elasticBackTime,G.sineOut,r.create(this,this.elasticOver)):this._value>this.max?y.to(this,{value:this.max},this.elasticBackTime,G.sineOut,r.create(this,this.elasticOver)):this.elasticOver():(this.event("end"),!this.hide&&this.autoHide&&y.to(this,{alpha:0},500))))};b.stopScroll=function(){this.onStageMouseUp2(null);f.timer.clear(this,this.tweenMove);y.clearTween(this)};c(0,b,"thumbPercent",function(){return this._thumbPercent},function(a){this.runCallLater(this.changeScrollBar);this.runCallLater(this._sizeChanged);this._thumbPercent=a=1<=a?.99:a;this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*a,v.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*a,v.scrollBarMinNum))});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.value=Number(a):f.superSet(k,this,"dataSource",a)});c(0,b,"skin",function(){return this._skin},function(a){" "!=a&&this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?f.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],r.create(this,this._skinLoaded)):this._skinLoaded())});c(0,b,"max",function(){return this.slider.max},function(a){this.slider.max=a});c(0,b,"min",function(){return this.slider.min},function(a){this.slider.min=a});c(0,b,"value",function(){return this._value},function(a){a!==this._value&&(this._value=a,this._isElastic||(this.slider._value!=a&&(this.slider._value=a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))});c(0,b,"isVertical",function(){return this.slider.isVertical},function(a){this.slider.isVertical=a});c(0,b,"sizeGrid",function(){return this.slider.sizeGrid},function(a){this.slider.sizeGrid=a});c(0,b,"scrollSize",function(){return this._scrollSize},function(a){this._scrollSize=a});c(0,b,"target",function(){return this._target},function(a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown));if(this._target=a)this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown)});c(0,b,"hide",function(){return this._hide},function(a){this._hide=a;this.visible=!a});c(0,b,"showButtons",function(){return this._showButtons},function(a){this._showButtons=a;this.callLater(this.changeScrollBar)});c(0,b,"touchScrollEnable",function(){return this._touchScrollEnable},function(a){this._touchScrollEnable=a;this.target=this._target});c(0,b,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(a){this._mouseWheelEnable=a;this.target=this._target});c(0,b,"lastOffset",function(){return this._lastOffset});c(0,b,"tick",function(){return this.slider.tick},function(a){this.slider.tick=a});return d}(k),S=function(e){function d(a){this.changeHandler=null;this.showLabel=this.isVertical=!0;this._allowClickBack=!1;this._max=100;this._min=0;this._tick=1;this._value=0;this._bar=this._progress=this._bg=this._skin=null;this._maxMove=this._ty=this._tx=NaN;this._globalSacle=null;d.__super.call(this);this.skin=a}h(d,"laya.ui.Slider",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._bg&&this._bg.destroy(a);this._bar&&this._bar.destroy(a);this._progress&&this._progress.destroy(a);this.changeHandler=this._progress=this._bar=this._bg=null};b.createChildren=function(){this.addChild(this._bg=new C);this.addChild(this._bar=new z)};b.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown);this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0";this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid);this.allowClickBack=!0};b.onBarMouseDown=function(a){this._globalSacle||(this._globalSacle=new H);this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01);this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width;this._tx=f.stage.mouseX;this._ty=f.stage.mouseY;f.stage.on("mousemove",this,this.mouseMove);f.stage.once("mouseup",this,this.mouseUp);f.stage.once("mouseout",this,this.mouseUp);this.showValueText()};b.showValueText=function(){if(this.showLabel){var a=laya.ui.Slider.label;this.addChild(a);a.textField.changeText(this._value+"");this.isVertical?(a.x=this._bar._x+20,a.y=.5*(this._bar.height-a.height)+this._bar._y):(a.y=this._bar._y-20,a.x=.5*(this._bar.width-a.width)+this._bar._x)}};b.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()};b.mouseUp=function(a){f.stage.off("mousemove",this,this.mouseMove);f.stage.off("mouseup",this,this.mouseUp);f.stage.off("mouseout",this,this.mouseUp);this.sendChangeEvent("changed");this.hideValueText()};b.mouseMove=function(a){a=this._value;this.isVertical?(this._bar.y+=(f.stage.mouseY-this._ty)/this._globalSacle.y,this._bar._y>this._maxMove?this._bar.y=this._maxMove:0>this._bar._y&&(this._bar.y=0),this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x+=(f.stage.mouseX-this._tx)/this._globalSacle.x,this._bar._x>this._maxMove?this._bar.x=this._maxMove:0>this._bar._x&&(this._bar.x=0),this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width));this._tx=f.stage.mouseX;this._ty=f.stage.mouseY;if(0!=this._tick){var b=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*b)/b}this._value!=a&&this.sendChangeEvent();this.showValueText()};b.sendChangeEvent=function(a){void 0===a&&(a="change");this.event(a);this.changeHandler&&this.changeHandler.runWith(this._value)};b._skinLoaded=function(){this._bg.skin=this._skin;this._bar.skin=this._skin.replace(".png","$bar.png");var a=this._skin.replace(".png","$progress.png");x.getRes(a)&&(this._progress||(this.addChild(this._progress=new C),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=a);this.setBarPoint();this.callLater(this.changeValue);this._sizeChanged();this.event("loaded")};b.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))};b.measureWidth=function(){return Math.max(this._bg.width,this._bar.width)};b.measureHeight=function(){return Math.max(this._bg.height,this._bar.height)};b._sizeChanged=function(){e.prototype._sizeChanged.call(this);this.isVertical?this._bg.height=this.height:this._bg.width=this.width;this.setBarPoint();this.changeValue()};b.setSlider=function(a,b,c){this._value=-1;this._min=a;this._max=b>a?b:a;this.value=c<a?a:c>b?b:c};b.changeValue=function(){if(0!=this.tick){var a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*a)/a}this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;a=this._max-this._min;0===a&&(a=1);this.isVertical?(this._bar.y=(this._value-this._min)/a*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/a*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width))};b.onBgMouseDown=function(a){a=this._bg.getMousePoint();this.value=this.isVertical?a.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:a.x/(this.width-this._bar.width)*(this._max-this._min)+this._min};c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.value=Number(a):f.superSet(k,this,"dataSource",a)});c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?f.loader.load([this._skin,this._skin.replace(".png","$bar.png")],r.create(this,this._skinLoaded)):this._skinLoaded())});c(0,b,"tick",function(){return this._tick},function(a){this._tick!=a&&(this._tick=a,this.callLater(this.changeValue))});c(0,b,"sizeGrid",function(){return this._bg.sizeGrid},function(a){this._bg.sizeGrid=a;this._bar.sizeGrid=a;this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)});c(0,b,"allowClickBack",function(){return this._allowClickBack},function(a){if(this._allowClickBack!=a)if(this._allowClickBack=a)this._bg.on("mousedown",this,this.onBgMouseDown);else this._bg.off("mousedown",this,this.onBgMouseDown)});c(0,b,"max",function(){return this._max},function(a){this._max!=a&&(this._max=a,this.callLater(this.changeValue))});c(0,b,"min",function(){return this._min},function(a){this._min!=a&&(this._min=a,this.callLater(this.changeValue))});c(0,b,"bar",function(){return this._bar});c(0,b,"value",function(){return this._value},function(a){if(this._value!=a){var b=this._value;this._value=a;this.changeValue();this._value!=b&&this.sendChangeEvent()}});F(d,["label",function(){return this.label=new D}]);return d}(k),Y=function(c){function d(a){this.gameStopHD=!1;this._gameBox=this._moreBox=this._iconImage=this.iconImgTl=null;this.screenType=0;this._moreGameDataUrl="https://abc.layabox.com/public/more/gamelist2.json";this.closeCallBack=this.clickCallBack=this._iconImageObj=null;this.isShow=!1;this.dinfo=null;this.ErrorUrlHttps="https://elastic.layabox.com/";this.tongjiType="bdm";void 0===a&&(a=0);d.__super.call(this);this.screenType=a;this.init()}var b,a;h(d,"laya.ui.MoreGame",c);c=d.prototype;c.getLocalDateString=function(a){void 0===a&&(a=0);a=this.getDateByTimestamp(a).toLocaleDateString();if(m.onLimixiu||m.onMiniGame)a=d.toLocaleDateString((new Date).getTime());return a=a.replace(RegExp("/","g"),"-")};c.getDateByTimestamp=function(a){void 0===a&&(a=0);return a&&""!=a?new Date(a):new Date};c.reportError=function(a,b,c){void 0===b&&(b="");c=c||{};var g=Date.now(),g=new Date(g+0);c.date=g.toLocaleString();c.etype=a;"error"!=a&&"statistics"!=a&&(a="statistics");c.version="V0.0.1";c.gameId=10100;c.dinfo=this.dinfo;c.channel=-1E3;c.msg=b;c["@timestamp"]=g.toISOString();c.user=this.getUserId();c.openid=this.getOpenId();b=d.getDay(g);c.rdate=b;c.day=g.getDate()+"";c.hour=g.getHours()+"";c.minute=g.getMinutes()+"";c.gameurl=ja.baseURI;c.regTime=0;"error"==a?this.sendLog(c,this.tongjiType+"error-"+b.substring(0,6)+"/"+a+"/",a):this.sendLog(c,this.tongjiType+"-"+b.substring(0,6)+"/"+a+"/",a)};c.getUserId=function(){var a=parseInt(B.getItem("layauserid")+"")||-1;-1==a&&(a=this.randRange(0,1E9),B.setItem("layauserid",a+""));return a};c.getOpenId=function(){var a=B.getItem("openid");if(null==a||""==a){for(var a="",b=0;32>b;b++)var c=this.randRange(0,62),a=a+"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(c);B.setItem("openid",a)}return a};c.sendLog=function(a,b,c){var g=this,d=new ga;d.on("error",this,function(a,b,c){c&&-1!=c.indexOf("[404]")&&(new ga).send(g.ErrorUrlHttps+"garbage/"+b+"/",JSON.stringify(a),"post","text",["Content-Type","application/json"])},[a,c]);m.onBDMiniGame&&(a.gameurl="");d.send(this.ErrorUrlHttps+b,JSON.stringify(a),"post","text",["Content-Type","application/json"])};c.initEvent=function(){this.on("click",this,this.onIconClick)};c.onStageResize=function(){var a=Math.min(f.stage.width/f.stage.designWidth,f.stage.height/f.stage.designHeight);720>f.stage.width&&(a=.9);this._moreBox&&this._moreBox.scale(a,a);this._gameBox&&this._gameBox.scale(a,a)};c.tada=function(a,b,c,d){void 0===c&&(c=1.1);void 0===d&&(d=1);var g=new oa;g.reset();g.to(a,{scaleX:c,scaleY:c,rotation:3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:-3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:-3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:-3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:-3},.1*b).to(a,{scaleX:c,scaleY:c,rotation:3},.1*b).to(a,{scaleX:d,scaleY:d,rotation:0},.1*b);g.play(0);return g};c.dispose=function(){this.removeEvent();this.gameStopHD=!0;this.closeCallBack=this.clickCallBack=this._iconImageObj=d._moreGameData=null;this.iconImgTl&&(this.iconImgTl.offAll("complete"),this.iconImgTl=null);this._moreBox&&(this._moreBox.removeChildren(),this._moreBox=null);this._gameBox&&(this._gameBox.removeChildren(),this._gameBox=null);this._iconImage&&(this._iconImage.removeSelf(),this._iconImage=null)};c.onSetIconType=function(a){this.gameStopHD=!a;this.visible=a};c.checkIconImgHD=function(){this.iconImgTl?this.iconImgTl.play(0):this.iconImgTl=this.tada(this._iconImage,1200,1.1,.9);this.iconImgTl.on("complete",this,this.onTlComplete)};c.onTlComplete=function(){if(this.parent)if(this._iconImage.scale(.9,.9),this._iconImage.rotation=0,this.gameStopHD&&this.iconImgTl)this.iconImgTl.offAll("complete"),this.iconImgTl=null;else f.timer.once(1E3,this,this.onYanChiPlay);else this.iconImgTl&&(this.iconImgTl.offAll(),this.iconImgTl=null)};c.onYanChiPlay=function(){this.parent&&this.iconImgTl?this.iconImgTl.play(0):this.iconImgTl&&(this.iconImgTl.offAll("complete"),this.iconImgTl=null)};c.removeEvent=function(){this.off("click",this,this.onIconClick)};c.onIconClick=function(){this.isShow=!0;null!=this.clickCallBack&&this.clickCallBack.run();var a=B.getItem("currentTime"),b=this.getLocalDateString();a!=b?(B.setItem("currentTime",b),this.reportError(d._moreGameData.statid1)):this.reportError(d._moreGameData.statid2);this.onResLoaded()};c.onResLoaded=function(){if(this._moreBox)this._moreBox.visible=!0;else{this._moreBox=new l;f.stage.addChild(this._moreBox);this._moreBox.zOrder=99999;this._moreBox.left=this._moreBox.right=this._moreBox.top=this._moreBox.bottom=0;var a=this.onCreateImage(d.onGetAtlasDanImgUrl("img_white_bg"),this._moreBox);a.top=a.left=a.right=a.bottom=0;a.sizeGrid="1,1,1,1,1";a=this.onCreateImage(d.onGetAtlasDanImgUrl("hengfengexian"),this._moreBox);a.left=a.right=0;a.y=132;a.alpha=.2;a=this.onCreateImage(d.onGetAtlasDanImgUrl("img_font_jingcai"),this._moreBox);a.on("click",this,this.onJiantouImgClick);this.isQMP()&&this.screenType?a.pos(15,70):a.pos(15,45);a=new R;this._moreBox.addChild(a);a.itemRender=b;a.selectEnable=!0;a.vScrollBarSkin="";a.scrollBar.autoHide=!0;a.scrollBar.elasticDistance=250;a.renderHandler=new r(this,this.onGameListRender);var c=d._moreGameData.marvellousGame.gameList,e=[];e.push(c[0]);e.push(c[1]);var ca=this.RandomNumBoth(e.length,c.length-e.length,c.length);if(ca){try{for(var da=0,q=ca.length;da<q;da++)e.push(c[ca[da]]);d._moreGameData.marvellousGame.gameList=e;a.array=d._moreGameData.marvellousGame.gameList}catch(p){a.array=d._moreGameData.marvellousGame.gameList}this.screenType&&(a.spaceY=10,a.width=690,this.isQMP()?a.height=f.stage.height+130:a.height=1139,a.y=139,a.centerX=0);this.onStageResize()}else this.visible=!1}};c.RandomNumBoth=function(a,b,c){for(var g=[];a<c;a++)g.push(a);c=[];var d=g.length;for(a=0;a<d;a++){var n=Math.floor(Math.random()*g.length);c.push(g[n]);g.splice(n,1);if(g.length<=d-b)return c}return null};c.isQMP=function(){var a=!1,b;b="horizontal"==f.stage.screenMode?m.height%9:m.width%9;m.onAndroid&&0==b&&-1!=[2280,2160,2244,3120,2248,2340,2310].indexOf("horizontal"==f.stage.screenMode?m.width:m.height)&&(a=!0);b=/iPhone/gi.test(m.window.navigator.userAgent)&&375==Math.min(m.clientHeight,m.clientWidth)&&812==Math.max(m.clientHeight,m.clientWidth);var c=414==Math.min(m.clientHeight,m.clientWidth)&&896==Math.max(m.clientHeight,m.clientWidth);!m.onMiniGame&&!m.onBDMiniGame||m.onAndroid||!b&&!c||(a=!0);return a};c.onDrawShapes=function(a,b,c,d){void 0===c&&(c=5);void 0===d&&(d=!1);var g=c;d&&(g=0);d=new u;d.graphics.drawPath(0,0,[["moveTo",c,0],["lineTo",105,0],["arcTo",a,0,a,c,c],["lineTo",a,b],["arcTo",a,b+c,105,b+c,g],["lineTo",c,b+c],["arcTo",0,b+c,0,b,g],["lineTo",0,c],["arcTo",0,0,c,0,c],["closePath"]],{fillStyle:"#ff0000"});return d};c.onCreateMaskImg=function(a,b){var c=this.onCreateImage(d.onGetAtlasDanImgUrl("dayuan"),b),g=this.onCreateImage(a,c);g.pos(11,10);var e=new u;e.graphics.drawCircle(71,74,68,"#ff0000");g.mask=e;c.scale(.7,.7);return c};c.onGameListRender=function(a,b){var c=d._moreGameData.marvellousGame.gameList;0>b||b>c.length-1||a.init(c[b],this.screenType,new r(this,this.onItemClickCallBack))};c.onItemClickCallBack=function(a){var b=this;swan.navigateToMiniProgram&&swan.navigateToMiniProgram({appKey:a.appKey,path:a.path,extraData:a.extendInfo,success:function(a){},fail:function(a){},complete:function(c){b.reportError(a.statid)}.bind(this)})};c.onJiantouImgClick=function(a){this.isShow=!1;this._moreBox&&(this._moreBox.visible=!1);null!=this.closeCallBack&&this.closeCallBack.run()};c.onCreateLabel=function(a,b,c,d,e,f,h){void 0===c&&(c=24);void 0===d&&(d="#000000");void 0===e&&(e=!1);void 0===f&&(f="center");void 0===h&&(h=10);var g=new D;g.text=a;g.font="Microsoft YaHei";g.fontSize=c;g.color=d;g.bold=!0;g.leading=h;g.valign="middle";g.align=f;g.wordWrap=e;b.addChild(g);return g};c.onCreateImage=function(a,b){var c=new C;c.skin=a;b.addChild(c);return c};c.init=function(){var a=-1<m.window.navigator.userAgent.indexOf("SwanGame");this.visible=!1;a&&(this.dinfo=JSON.stringify(laya.bd.mini.BMiniAdapter.systemInfo),this.onGetAdvsListData())};c.randRange=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};c.onGetAdvsListData=function(){var a=this,b=this.randRange(1E4,1E6);d._http.open("get",this._moreGameDataUrl+"?"+b,!0);d._http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d._http.responseType="text";d._http.onerror=function(b){a._onError(b)};d._http.onload=function(b){a._onLoad(b)};d._http.send(null)};c._onError=function(a){this.error("Request failed Status:"+d._http.status+" text:"+d._http.statusText)};c._onLoad=function(a){a=d._http;var b=void 0!==a.status?a.status:200;200===b||204===b||0===b?this.complete():this.error("["+a.status+"]"+a.statusText+":"+a.responseURL)};c.error=function(a){this.event("error",a)};c.complete=function(){try{d._moreGameData=JSON.parse(d._http.response||d._http.responseText),this.initUI()}catch(g){this.error(g.message)}};c.initUI=function(){d._moreGameData.isOpen&&this.screenType?(this._iconImage||(this._iconImage=new C,this.addChild(this._iconImage)),this._iconImage.skin=d.onGetImgSkinUrl(d._moreGameData.icon),this._iconImageObj&&(this._iconImage.size(this._iconImageObj.width,this._iconImageObj.height),this._iconImage.pivot(this._iconImageObj.width/2,this._iconImageObj.height/2),this._iconImage.pos(this._iconImageObj.width/2,this._iconImageObj.height/2)),this.visible=!0,this.initEvent(),this.gameStopHD=!1,this.checkIconImgHD()):this.visible=!1};c.setIconSize=function(a,b){this._iconImage&&(this._iconImage.size(a,b),this._iconImage.pivot(a/2,b/2),this._iconImage.pos(a/2,b/2));this._iconImageObj={width:a,height:b}};d.toLocaleDateString=function(a){return d.getDateFormatStr(a,"/")};d.getDateFormatStr=function(a,b){void 0===b&&(b="yynndd");var c=new Date(a),d=c.getFullYear(),g=c.getMonth()+1,e=c.getDate(),f=c.getHours(),n=c.getMinutes(),c=c.getSeconds();switch(b){case "yynndd":return d.toString()+"\u5e74"+g.toString()+"\u6708"+e.toString()+"\u65e5";case "/":return d.toString()+"/"+g.toString()+"/"+e.toString()}return d.toString()+"\u5e74"+g.toString()+"\u6708"+e.toString()+"\u65e5"+f.toString()+"\u65f6"+n.toString()+"\u5206"+c.toString()+"\u79d2"};d.getDay=function(a){var b=a.getMonth()+1,c=a.getDate();return a.getFullYear()+""+(10>b?"0"+b:b)+""+(10>c?"0"+c:c)};d.onGetAtlasDanImgUrl=function(a){return d._moreGameData.imgPath+d._moreGameData.atlas+a+".png"};d.onGetImgSkinUrl=function(a){return d._moreGameData.imgPath+a};d.onGetIconImgSkinUrl=function(a){return d._moreGameData.iconPath+a};d._moreGameData=null;F(d,["_http",function(){return this._http=new m.window.XMLHttpRequest}]);d.__init$=function(){b=function(b){function c(){this.gameListBox=this.titleLabel=null;c.__super.call(this)}h(c,"",b);b=c.prototype;b.init=function(b,c,d){this.titleLabel?this.titleLabel.text=b.title:(this.titleLabel=this.onCreateLabel(b.title,this,32,"#3d3939"),this.titleLabel.pos(8,0),this.titleLabel.size(162,50));if(this.gameListBox)for(g=0,e=this.gameListBox._children.length;g<e;g++)f=this.gameListBox._children[g],f.init(b.gameList[g],c,d);else{this.gameListBox=new l;this.addChild(this.gameListBox);for(var g=0,e=b.gameList.length;g<e;g++){var f=new a;f.init(b.gameList[g],c,d);f.x=0+175*g;f.y=65;this.gameListBox.addChild(f)}}this.size(695,340)};b.onCreateLabel=function(a,b,c,d,g){void 0===c&&(c=26);void 0===d&&(d="#000000");void 0===g&&(g=!0);var e=new D;e.text=a;e.font="Microsoft YaHei";e.fontSize=c;e.color=d;e.bold=g;e.leading=10;e.valign="middle";e.align="center";e.overflow="hidden";b.addChild(e);return e};return c}(l);a=function(a){function b(){this.callBackHandler=this.itemData=this.playImg=this.iconImg=this.iconNameLabel=this.kuangImg=null;b.__super.call(this)}h(b,"",a);a=b.prototype;a.MoveGameItem=function(){};a.initEvent=function(){this.on("click",this,this.onItemClick)};a.onItemClick=function(){null!=this.callBackHandler&&this.callBackHandler.runWith([this.itemData])};a.init=function(a,b,c){this.itemData=a;this.callBackHandler=c;this.kuangImg?this.kuangImg.skin=d.onGetAtlasDanImgUrl("dayuan"):this.kuangImg=this.onCreateImage(d.onGetAtlasDanImgUrl("dayuan"),this);this.iconImg?this.iconImg.skin=d.onGetIconImgSkinUrl(a.icon):(this.iconImg=this.onCreateImage(d.onGetIconImgSkinUrl(a.icon),this),b=new u,b.graphics.drawCircle(71,74,68,"#ff0000"),this.iconImg.mask=b,this.iconImg.pos(13,10));this.iconNameLabel?this.iconNameLabel.text=a.name:(this.iconNameLabel=this.onCreateLabel(a.name,this,28,"#3d3939"),this.iconNameLabel.pos(7,165));this.playImg?this.playImg.skin=d.onGetAtlasDanImgUrl("img_play"):(this.playImg=this.onCreateImage(d.onGetAtlasDanImgUrl("img_play"),this),this.playImg.pos(12,210));this.size(165,270);this.initEvent()};a.onCreateLabel=function(a,b,c,d,g){void 0===c&&(c=24);void 0===d&&(d="#000000");void 0===g&&(g=!1);var e=new D;e.text=a;e.font="Microsoft YaHei";e.fontSize=c;e.color=d;e.bold=g;e.leading=10;e.valign="middle";e.align="center";e.size(152,44);e.overflow="hidden";b.addChild(e);return e};a.onCreateImage=function(a,b){var c=new C;c.skin=a;b.addChild(c);return c};return b}(l)};return d}(V),Ba=function(e){function d(){this.group=this.closeEffect=this.popupEffect=this.closeHandler=null;this.isModal=!1;this.isPopupCenter=this.isShowEffect=!0;this._effectTween=this._param=this._dragArea=this.closeType=null;d.__super.call(this);this.popupEffect=d.manager.popupEffectHandler;this.closeEffect=d.manager.closeEffectHandler;this._dealDragArea();this.on("click",this,this._onClick)}h(d,"laya.ui.Dialog",e);var b=d.prototype;b._dealDragArea=function(){var a=this.getChildByName("drag");a&&(this.dragArea=a._x+","+a._y+","+a.width+","+a.height,a.removeSelf())};b._onMouseDown=function(a){a=this.getMousePoint();this._dragArea.contains(a.x,a.y)?this.startDrag():this.stopDrag()};b._onClick=function(a){if(a=a.target)switch(a.name){case "close":case "cancel":case "sure":case "no":case "ok":case "yes":this.close(a.name)}};b.open=function(a,b){void 0===a&&(a=!0);this._dealDragArea();this._param=b;d.manager.open(this,a,this.isShowEffect);d.manager.lock(!1)};b.close=function(a){this.closeType=a;d.manager.close(this)};b.destroy=function(a){void 0===a&&(a=!0);this._dragArea=this.closeEffect=this.popupEffect=this.closeHandler=null;e.prototype.destroy.call(this,a)};b.show=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);this._open(!1,a,b)};b.popup=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);this._open(!0,a,b)};b._open=function(a,b,c){this.isModal=a;this.isShowEffect=c;d.manager.lock(!0);this.open(b)};c(0,b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(a){a?(a=w.fillArray([0,0,0,0],a,Number),this._dragArea=new aa(a[0],a[1],a[2],a[3]),this.on("mousedown",this,this._onMouseDown)):(this._dragArea=null,this.off("mousedown",this,this._onMouseDown))});c(0,b,"isPopup",function(){return null!=this.parent});c(0,b,"zOrder",e.prototype._$get_zOrder,function(a){f.superSet(V,this,"zOrder",a);d.manager._checkMask()});c(1,d,"manager",function(){return d._manager=d._manager||new pa},function(a){d._manager=a});d.setLockView=function(a){d.manager.setLockView(a)};d.lock=function(a){d.manager.lock(a)};d.closeAll=function(){d.manager.closeAll()};d.getDialogsByGroup=function(a){return d.manager.getDialogsByGroup(a)};d.closeByGroup=function(a){return d.manager.closeByGroup(a)};d.CLOSE="close";d.CANCEL="cancel";d.SURE="sure";d.NO="no";d.YES="yes";d.OK="ok";d._manager=null;return d}(V),qa=function(e){function d(){this._items=null;this._selectedIndex=0;d.__super.call(this);this._setIndexHandler=r.create(this,this.setIndex,null,!1)}h(d,"laya.ui.ViewStack",e);var b=d.prototype;f.imps(b,{"laya.ui.IItem":!0});b.setItems=function(a){this.removeChildren();for(var b=0,c=0,d=a.length;c<d;c++){var e=a[c];e&&(e.name="item"+b,this.addChild(e),b++)}this.initItems()};b.addItem=function(a){a.name="item"+this._items.length;this.addChild(a);this.initItems()};b._afterInited=function(){this.initItems()};b.initItems=function(){this._items=[];for(var a=0;1E4>a;a++){var b=this.getChildByName("item"+a);if(null==b)break;this._items.push(b);b.visible=a==this._selectedIndex}};b.setSelect=function(a,b){this._items&&-1<a&&a<this._items.length&&(this._items[a].visible=b)};b.setIndex=function(a){this.selectedIndex=a};c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;if("number"==typeof a&&Math.floor(a)==a||"string"==typeof a)this.selectedIndex=parseInt(a);else for(var b in this._dataSource)this.hasOwnProperty(b)&&(this[b]=this._dataSource[b])});c(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=a,this.setSelect(this._selectedIndex,!0))});c(0,b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(a){this.selectedIndex=this._items.indexOf(a)});c(0,b,"items",function(){return this._items});c(0,b,"setIndexHandler",function(){return this._setIndexHandler},function(a){this._setIndexHandler=a});return d}(l),W=function(e){function d(){this._space=0;this._align="none";this._itemChanged=!1;d.__super.call(this)}h(d,"laya.ui.LayoutBox",e);e=d.prototype;e.addChild=function(b){b.on("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.addChild.call(this,b)};e.onResize=function(b){this._setItemChanged()};e.addChildAt=function(b,a){b.on("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.addChildAt.call(this,b,a)};e.removeChildAt=function(b){this.getChildAt(b).off("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.removeChildAt.call(this,b)};e.refresh=function(){this._setItemChanged()};e.changeItems=function(){this._itemChanged=!1};e.sortItem=function(b){b&&b.sort(function(a,b){return a.y-b.y})};e._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))};c(0,e,"space",function(){return this._space},function(b){this._space=b;this._setItemChanged()});c(0,e,"align",function(){return this._align},function(b){this._align=b;this._setItemChanged()});return d}(l),M=function(e){function d(a,b){this._items=this.selectHandler=null;this._selectedIndex=-1;this._skin=null;this._direction="horizontal";this._space=0;this._strokeColors=this._labelStrokeColor=this._labelFont=this._labelColors=this._labels=null;this._labelStroke=NaN;this._labelSize=0;this._labelBold=!1;this._labelAlign=this._labelPadding=null;this._stateNum=0;this._labelChanged=!1;d.__super.call(this);this.skin=b;this.labels=a}h(d,"laya.ui.UIGroup",e);var b=d.prototype;f.imps(b,{"laya.ui.IItem":!0});b.preinitialize=function(){this.mouseEnabled=!0};b.destroy=function(a){void 0===a&&(a=!0);laya.ui.UIComponent.prototype.destroy.call(this,a);this._items&&(this._items.length=0);this.selectHandler=this._items=null};b.addItem=function(a,b){void 0===b&&(b=!0);var c=this._items.length;a.name="item"+c;this.addChild(a);this.initItems();if(b&&0<c){var d=this._items[c-1];"horizontal"==this._direction?a.x=d._x+d.width+this._space:a.y=d._y+d.height+this._space}else b&&(a.x=0,a.y=0);return c};b.delItem=function(a,b){void 0===b&&(b=!0);var c=this._items.indexOf(a);if(-1!=c){this.removeChild(a);for(var c=c+1,d=this._items.length;c<d;c++){var g=this._items[c];g.name="item"+(c-1);b&&("horizontal"==this._direction?g.x-=a.width+this._space:g.y-=a.height+this._space)}this.initItems();-1<this._selectedIndex&&(c=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=c)}};b._afterInited=function(){this.initItems()};b.initItems=function(){this._items||(this._items=[]);for(var a=this._items.length=0;1E4>a;a++){var b=this.getChildByName("item"+a);if(null==b)break;this._items.push(b);b.selected=a===this._selectedIndex;b.clickHandler=r.create(this,this.itemClick,[a],!1)}};b.itemClick=function(a){this.selectedIndex=a};b.setSelect=function(a,b){this._items&&-1<a&&a<this._items.length&&(this._items[a].selected=b)};b._skinLoaded=function(){this._setLabelChanged();this.event("loaded")};b.createItem=function(a,b){return null};b.changeLabels=function(){this._labelChanged=!1;if(this._items)for(var a=0,b=0,c=this._items.length;b<c;b++){var d=this._items[b];this._skin&&(d.skin=this._skin);this._labelColors&&(d.labelColors=this._labelColors);this._labelSize&&(d.labelSize=this._labelSize);this._labelStroke&&(d.labelStroke=this._labelStroke);this._labelStrokeColor&&(d.labelStrokeColor=this._labelStrokeColor);this._strokeColors&&(d.strokeColors=this._strokeColors);this._labelBold&&(d.labelBold=this._labelBold);this._labelPadding&&(d.labelPadding=this._labelPadding);this._labelAlign&&(d.labelAlign=this._labelAlign);this._stateNum&&(d.stateNum=this._stateNum);this._labelFont&&(d.labelFont=this._labelFont);"horizontal"===this._direction?(d.y=0,d.x=a,a+=d.width+this._space):(d.x=0,d.y=a,a+=d.height+this._space)}this._sizeChanged()};b.commitMeasure=function(){this.runCallLater(this.changeLabels)};b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))};c(0,b,"labelStrokeColor",function(){return this._labelStrokeColor},function(a){this._labelStrokeColor!=a&&(this._labelStrokeColor=a,this._setLabelChanged())});c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?f.loader.load(this._skin,r.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});c(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=a,this.setSelect(a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))});c(0,b,"labels",function(){return this._labels},function(a){if(this._labels!=a){this._labels=a;this.removeChildren();this._setLabelChanged();if(this._labels){a=this._labels.split(",");for(var b=0,c=a.length;b<c;b++){var d=this.createItem(this._skin,a[b]);d.name="item"+b;this.addChild(d)}}this.initItems()}});c(0,b,"strokeColors",function(){return this._strokeColors},function(a){this._strokeColors!=a&&(this._strokeColors=a,this._setLabelChanged())});c(0,b,"labelColors",function(){return this._labelColors},function(a){this._labelColors!=a&&(this._labelColors=a,this._setLabelChanged())});c(0,b,"labelStroke",function(){return this._labelStroke},function(a){this._labelStroke!=a&&(this._labelStroke=a,this._setLabelChanged())});c(0,b,"labelSize",function(){return this._labelSize},function(a){this._labelSize!=a&&(this._labelSize=a,this._setLabelChanged())});c(0,b,"stateNum",function(){return this._stateNum},function(a){this._stateNum!=a&&(this._stateNum=a,this._setLabelChanged())});c(0,b,"labelBold",function(){return this._labelBold},function(a){this._labelBold!=a&&(this._labelBold=a,this._setLabelChanged())});c(0,b,"labelFont",function(){return this._labelFont},function(a){this._labelFont!=a&&(this._labelFont=a,this._setLabelChanged())});c(0,b,"labelPadding",function(){return this._labelPadding},function(a){this._labelPadding!=a&&(this._labelPadding=a,this._setLabelChanged())});c(0,b,"direction",function(){return this._direction},function(a){this._direction=a;this._setLabelChanged()});c(0,b,"space",function(){return this._space},function(a){this._space=a;this._setLabelChanged()});c(0,b,"items",function(){return this._items});c(0,b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(a){this.selectedIndex=this._items.indexOf(a)});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.selectedIndex=parseInt(a):a instanceof Array?this.labels=a.join(","):f.superSet(l,this,"dataSource",a)});return d}(l),ua=function(e){function d(a,b){void 0===b&&(b="");d.__super.call(this,a,b)}h(d,"laya.ui.CheckBox",e);var b=d.prototype;b.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this);this.toggle=!0;this._autoSize=!1};b.initialize=function(){e.prototype.initialize.call(this);this.createText();this._text.align="left";this._text.valign="top";this._text.width=0};c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"boolean"==typeof a?this.selected=a:"string"==typeof a?this.selected="true"===a:f.superSet(z,this,"dataSource",a)});return d}(z),Da=function(e){function d(){this._renderHandler=this._source=this._list=null;this._spaceLeft=10;this._spaceBottom=0;this._keepStatus=!0;d.__super.call(this);this.width=this.height=200}h(d,"laya.ui.Tree",e);var b=d.prototype;f.imps(b,{"laya.ui.IRender":!0});b.destroy=function(a){void 0===a&&(a=!0);laya.ui.UIComponent.prototype.destroy.call(this,a);this._list&&this._list.destroy(a);this._renderHandler=this._source=this._list=null};b.createChildren=function(){this.addChild(this._list=new R);this._list.renderHandler=r.create(this,this.renderItem,null,!1);this._list.repeatX=1;this._list.on("change",this,this.onListChange)};b.onListChange=function(a){this.event("change")};b.getArray=function(){var a=[],b,c;for(c in this._source)b=this._source[c],this.getParentOpenStatus(b)&&(b.x=this._spaceLeft*this.getDepth(b),a.push(b));return a};b.getDepth=function(a,b){void 0===b&&(b=0);return null==a.nodeParent?b:this.getDepth(a.nodeParent,b+1)};b.getParentOpenStatus=function(a){a=a.nodeParent;return null==a?!0:a.isOpen?null!=a.nodeParent?this.getParentOpenStatus(a):!0:!1};b.renderItem=function(a,b){var c=a.dataSource;if(c){a.left=c.x;var d=a.getChildByName("arrow");d&&(c.hasChild?(d.visible=!0,d.index=c.isOpen?1:0,d.tag=b,d.off("click",this,this.onArrowClick),d.on("click",this,this.onArrowClick)):d.visible=!1);if(d=a.getChildByName("folder"))d.index=2==d.clipY?c.isDirectory?0:1:c.isDirectory?c.isOpen?1:0:2;this._renderHandler&&this._renderHandler.runWith([a,b])}};b.onArrowClick=function(a){a=a.currentTarget.tag;this._list.array[a].isOpen=!this._list.array[a].isOpen;this.event("open");this._list.array=this.getArray()};b.setItemState=function(a,b){this._list.array[a]&&(this._list.array[a].isOpen=b,this._list.array=this.getArray())};b.fresh=function(){this._list.array=this.getArray();this.repaint()};b.parseXml=function(a,b,c,d){var g,e=a.childNodes,f=e.length;if(!d){g={};a=a.attributes;for(var n in a){d=a[n];var ba=d.nodeValue;g[d.nodeName]="true"==ba?!0:"false"==ba?!1:ba}g.nodeParent=c;0<f&&(g.isDirectory=!0);g.hasChild=0<f;b.push(g)}for(c=0;c<f;c++)this.parseXml(e[c],b,g,!1)};b.parseOpenStatus=function(a,b){for(var c=0,d=b.length;c<d;c++){var g=b[c];if(g.isDirectory)for(var e=0,f=a.length;e<f;e++){var h=a[e];if(h.isDirectory&&this.isSameParent(h,g)&&g.label==h.label){g.isOpen=h.isOpen;break}}}};b.isSameParent=function(a,b){return null==a.nodeParent&&null==b.nodeParent?!0:null==a.nodeParent||null==b.nodeParent?!1:a.nodeParent.label==b.nodeParent.label?this.isSameParent(a.nodeParent,b.nodeParent):!1};b.filter=function(a){if(a){var b=[];this.getFilterSource(this._source,b,a);this._list.array=b}else this._list.array=this.getArray()};b.getFilterSource=function(a,b,c){c=c.toLocaleLowerCase();var d,g;for(g in a)d=a[g],!d.isDirectory&&-1<String(d.label).toLowerCase().indexOf(c)&&(d.x=0,b.push(d)),d.child&&0<d.child.length&&this.getFilterSource(d.child,b,c)};c(0,b,"spaceBottom",function(){return this._list.spaceY},function(a){this._list.spaceY=a});c(0,b,"keepStatus",function(){return this._keepStatus},function(a){this._keepStatus=a});c(0,b,"itemRender",function(){return this._list.itemRender},function(a){this._list.itemRender=a});c(0,b,"array",function(){return this._list.array},function(a){this._keepStatus&&this._list.array&&a&&this.parseOpenStatus(this._list.array,a);this._source=a;this._list.array=this.getArray()});c(0,b,"mouseHandler",function(){return this._list.mouseHandler},function(a){this._list.mouseHandler=a});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;f.superSet(l,this,"dataSource",a)});c(0,b,"source",function(){return this._source});c(0,b,"scrollBar",function(){return this._list.scrollBar});c(0,b,"list",function(){return this._list});c(0,b,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(a){this._list.vScrollBarSkin=a});c(0,b,"renderHandler",function(){return this._renderHandler},function(a){this._renderHandler=a});c(0,b,"selectedIndex",function(){return this._list.selectedIndex},function(a){this._list.selectedIndex=a});c(0,b,"spaceLeft",function(){return this._spaceLeft},function(a){this._spaceLeft=a});c(0,b,"selectedItem",function(){return this._list.selectedItem},function(a){this._list.selectedItem=a});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(l,this,"width",a);this._list.width=a});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(l,this,"height",a);this._list.height=a});c(0,b,"xml",null,function(a){var b=[];this.parseXml(a.childNodes[0],b,null,!0);this.array=b});c(0,b,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null});return d}(l),xa=function(e){function d(){this._hScrollBar=this._vScrollBar=this._content=null;this._scrollChanged=!1;this._usedCache=null;this._elasticEnabled=!1;d.__super.call(this);this.width=this.height=100}h(d,"laya.ui.Panel",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);laya.ui.UIComponent.prototype.destroy.call(this,a);this._content&&this._content.destroy(a);this._vScrollBar&&this._vScrollBar.destroy(a);this._hScrollBar&&this._hScrollBar.destroy(a);this._content=this._hScrollBar=this._vScrollBar=null};b.destroyChildren=function(){this._content.destroyChildren()};b.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new l)};b.addChild=function(a){a.on("resize",this,this.onResize);this._setScrollChanged();return this._content.addChild(a)};b.onResize=function(){this._setScrollChanged()};b.addChildAt=function(a,b){a.on("resize",this,this.onResize);this._setScrollChanged();return this._content.addChildAt(a,b)};b.removeChild=function(a){a.off("resize",this,this.onResize);this._setScrollChanged();return this._content.removeChild(a)};b.removeChildAt=function(a){this.getChildAt(a).off("resize",this,this.onResize);this._setScrollChanged();return this._content.removeChildAt(a)};b.removeChildren=function(a,b){void 0===a&&(a=0);void 0===b&&(b=2147483647);this._content.removeChildren(a,b);this._setScrollChanged();return this};b.getChildAt=function(a){return this._content.getChildAt(a)};b.getChildByName=function(a){return this._content.getChildByName(a)};b.getChildIndex=function(a){return this._content.getChildIndex(a)};b.changeScroll=function(){this._scrollChanged=!1;var a=this.contentWidth||1,b=this.contentHeight||1,c=this._vScrollBar,d=this._hScrollBar,e=c&&b>this._height,f=d&&a>this._width,h=e?this._width-c.width:this._width,k=f?this._height-d.height:this._height;c&&(c.x=this._width-c.width,c.y=0,c.height=this._height-(f?d.height:0),c.scrollSize=Math.max(.033*this._height,1),c.thumbPercent=k/b,c.setScroll(0,b-k,c.value));d&&(d.x=0,d.y=this._height-d.height,d.width=this._width-(e?c.width:0),d.scrollSize=Math.max(.033*this._width,1),d.thumbPercent=h/a,d.setScroll(0,a-h,d.value))};b._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this);this.setContentSize(this._width,this._height)};b.setContentSize=function(a,b){var c=this._content;c.width=a;c.height=b;c._style.scrollRect||(c.scrollRect=aa.create());c._style.scrollRect.setTo(0,0,a,b);c.scrollRect=c.scrollRect};b.onScrollBarChange=function(a){var b=this._content._style.scrollRect;if(b){var c=Math.round(a.value);a.isVertical?b.y=c:b.x=c;this._content.scrollRect=b}};b.scrollTo=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.vScrollBar&&(this.vScrollBar.value=b);this.hScrollBar&&(this.hScrollBar.value=a)};b.refresh=function(){this.changeScroll()};b.onScrollStart=function(){this._usedCache||(this._usedCache=f.superGet(l,this,"cacheAs"));f.superSet(l,this,"cacheAs","none");this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd);this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)};b.onScrollEnd=function(){f.superSet(l,this,"cacheAs",this._usedCache)};b._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))};c(0,b,"numChildren",function(){return this._content.numChildren});c(0,b,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new Q),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._hScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged());this._hScrollBar.skin=a});c(0,b,"contentWidth",function(){for(var a=0,b=this._content.numChildren-1;-1<b;b--)var c=this._content.getChildAt(b),a=Math.max(c._x+c.width*c.scaleX-c.pivotX,a);return a});c(0,b,"contentHeight",function(){for(var a=0,b=this._content.numChildren-1;-1<b;b--)var c=this._content.getChildAt(b),a=Math.max(c._y+c.height*c.scaleY-c.pivotY,a);return a});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(l,this,"width",a);this._setScrollChanged()});c(0,b,"hScrollBar",function(){return this._hScrollBar});c(0,b,"content",function(){return this._content});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(l,this,"height",a);this._setScrollChanged()});c(0,b,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new U),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._vScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged());this._vScrollBar.skin=a});c(0,b,"vScrollBar",function(){return this._vScrollBar});c(0,b,"cacheAs",e.prototype._$get_cacheAs,function(a){f.superSet(l,this,"cacheAs",a);this._usedCache=null;"none"!==a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))});c(0,b,"elasticEnabled",function(){return this._elasticEnabled},function(a){this._elasticEnabled=a;this._vScrollBar&&(this._vScrollBar.elasticDistance=a?200:0);this._hScrollBar&&(this._hScrollBar.elasticDistance=a?200:0)});return d}(l),R=function(e){function d(){this.mouseHandler=this.renderHandler=this.selectHandler=null;this.selectEnable=!1;this.totalPage=0;this._$componentType="List";this._itemRender=this._scrollBar=this._content=null;this._spaceY=this._spaceX=this._repeatY2=this._repeatX2=this._repeatY=this._repeatX=0;this._array=null;this._startIndex=0;this._selectedIndex=-1;this._page=0;this._isVertical=!0;this._cellSize=20;this._cellOffset=0;this.cacheContent=this._isMoved=!1;this._createdLine=0;this._cellChanged=!1;this._usedCache=null;this._elasticEnabled=!1;this._preLen=0;d.__super.call(this);this._cells=[];this._offset=new H}h(d,"laya.ui.List",e);var b=d.prototype;f.imps(b,{"laya.ui.IRender":!0,"laya.ui.IItem":!0});b.destroy=function(a){void 0===a&&(a=!0);this._content&&this._content.destroy(a);this._scrollBar&&this._scrollBar.destroy(a);laya.ui.UIComponent.prototype.destroy.call(this,a);this.selectHandler=this.renderHandler=this.mouseHandler=this._array=this._cells=this._itemRender=this._scrollBar=this._content=null};b.createChildren=function(){this.addChild(this._content=new l)};b.onScrollStart=function(){this._usedCache||(this._usedCache=f.superGet(l,this,"cacheAs"));f.superSet(l,this,"cacheAs","none");this._scrollBar.once("end",this,this.onScrollEnd)};b.onScrollEnd=function(){f.superSet(l,this,"cacheAs",this._usedCache)};b._removePreScrollBar=function(){var a=this.removeChildByName("scrollBar");a&&a.destroy(!0)};b.changeCells=function(){this._cellChanged=!1;if(this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var a=this._getOneCell(),b=a.width+this._spaceX||1,a=a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/b):Math.ceil(this._width/b));0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/a):Math.round(this._height/a));var c=this._width?this._width:b*this.repeatX-this._spaceX,d=this._height?this._height:a*this.repeatY-this._spaceY;this._cellSize=this._isVertical?a:b;this._cellOffset=this._isVertical?a*Math.max(this._repeatY2,this._repeatY)-d-this._spaceY:b*Math.max(this._repeatX2,this._repeatX)-c-this._spaceX;this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=d:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=c);this.setContentSize(c,d);b=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,this._isVertical?this.repeatX:this.repeatY,b);this._createdLine=b;this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}};b._getOneCell=function(){if(0===this._cells.length){var a=this.createItem();this._offset.setTo(a._x,a._y);if(this.cacheContent)return a;this._cells.push(a)}return this._cells[0]};b._createItems=function(a,b,c){var d=this._content,e=this._getOneCell(),g=e.width+this._spaceX,f=e.height+this._spaceY;if(this.cacheContent)d=new l,d.cacheAs="normal",d.pos((this._isVertical?0:a)*g,(this._isVertical?a:0)*f),this._content.addChild(d);else{for(var n=[],e=this._cells.length-1;-1<e;e--){var h=this._cells[e];h.removeSelf();n.push(h)}this._cells.length=0}for(;a<c;a++)for(h=0;h<b;h++)e=n&&n.length?n.pop():this.createItem(),e.x=(this._isVertical?h:a)*g-d._x,e.y=(this._isVertical?a:h)*f-d._y,e.name="item"+(a*b+h),d.addChild(e),this.addCell(e)};b.createItem=function(){var a=[],b="function"==typeof this._itemRender?new this._itemRender:na.createComp(this._itemRender,null,null,a);if(0==a.length&&b._watchMap){var c=b._watchMap,d;for(d in c)for(var e=c[d],f=0;f<e.length;f++){var h=e[f];a.push(h.comp,h.prop,h.value)}}a.length&&(b._$bindData=a);return b};b.addCell=function(a){a.on("click",this,this.onCellMouse);a.on("rightclick",this,this.onCellMouse);a.on("mouseover",this,this.onCellMouse);a.on("mouseout",this,this.onCellMouse);a.on("mousedown",this,this.onCellMouse);a.on("mouseup",this,this.onCellMouse);this._cells.push(a)};b._afterInited=function(){this.initItems()};b.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var a,b=a=0;1E4>b;b++){var c=this.getChildByName("item"+b);if(c)this.addCell(c),a++;else break}this.repeatY=a}};b.setContentSize=function(a,b){this._content.width=a;this._content.height=b;if(this._scrollBar||0!=this._offset.x||0!=this._offset.y)this._content._style.scrollRect||(this._content.scrollRect=aa.create()),this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,a,b),this._content.scrollRect=this._content.scrollRect;this.event("resize")};b.onCellMouse=function(a){"mousedown"===a.type&&(this._isMoved=!1);var b=a.currentTarget,c=this._startIndex+this._cells.indexOf(b);0>c||("click"===a.type||"rightclick"===a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=c:this.changeCellState(b,!0,0):"mouseover"!==a.type&&"mouseout"!==a.type||this._selectedIndex===c||this.changeCellState(b,"mouseover"===a.type,0),this.mouseHandler&&this.mouseHandler.runWith([a,c]))};b.changeCellState=function(a,b,c){if(a=a.getChildByName("selectBox"))this.selectEnable=!0,a.visible=b,a.index=c};b._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this);this.setContentSize(this.width,this.height);this._scrollBar&&this.callLater(this.onScrollBarChange)};b.onScrollBarChange=function(a){this.runCallLater(this.changeCells);a=this._scrollBar.value;var b=this._isVertical?this.repeatX:this.repeatY,c=this._isVertical?this.repeatY:this.repeatX,d=Math.floor(a/this._cellSize);if(this.cacheContent)e=c+1,this._createdLine-d<e&&(this._createItems(this._createdLine,b,this._createdLine+e),this.renderItems(this._createdLine*b,0),this._createdLine+=e);else{var d=d*b,e=0;if(d>this._startIndex){var e=d-this._startIndex,f=!0,h=this._startIndex+b*(c+1);this._isMoved=!0}else d<this._startIndex&&(e=this._startIndex-d,f=!1,h=this._startIndex-1,this._isMoved=!0);for(c=0;c<e;c++){if(f){var k=this._cells.shift();this._cells[this._cells.length]=k;var l=h+c}else k=this._cells.pop(),this._cells.unshift(k),l=h-c;var m=Math.floor(l/b)*this._cellSize;this._isVertical?k.y=m:k.x=m;this.renderItem(k,l)}this._startIndex=d;this.changeSelectStatus()}f=this._content._style.scrollRect;this._isVertical?(f.y=a-this._offset.y,f.x=-this._offset.x):(f.y=-this._offset.y,f.x=a-this._offset.x);this._content.scrollRect=f};b.posCell=function(a,b){if(this._scrollBar){var c=Math.floor(b/(this._isVertical?this.repeatX:this.repeatY))*this._cellSize;this._isVertical?a._y=c:a.x=c}};b.changeSelectStatus=function(){for(var a=0,b=this._cells.length;a<b;a++)this.changeCellState(this._cells[a],this._selectedIndex===this._startIndex+a,1)};b.renderItems=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);for(var c=a,d=b||this._cells.length;c<d;c++)this.renderItem(this._cells[c],this._startIndex+c);this.changeSelectStatus()};b.renderItem=function(a,b){this._array&&0<=b&&b<this._array.length?(a.visible=!0,a._$bindData?(a._dataSource=this._array[b],this._bindData(a,this._array[b])):a.dataSource=this._array[b],this.cacheContent||this.posCell(a,b),this.hasListener("render")&&this.event("render",[a,b]),this.renderHandler&&this.renderHandler.runWith([a,b])):(a.visible=!1,a.dataSource=null)};b._bindData=function(a,b){for(var c=a._$bindData,d=0,e=c.length;d<e;d++){var f=c[d++],g=c[d++],h=w.getBindFun(c[d]);f[g]=h.call(this,b)}};b.updateArray=function(a){this._array=a;var b;this._array&&(b=this._preLen-this._startIndex,0<=b&&this.renderItems(b),this._preLen=this._array.length);this._scrollBar&&(b=this._isVertical?this.repeatY:this.repeatX,a=Math.ceil(a.length/(this._isVertical?this.repeatX:this.repeatY)),a>=b&&(this._scrollBar.thumbPercent=b/a,this._scrollBar.slider._max=(a-b)*this._cellSize+this._cellOffset))};b.refresh=function(){this.array=this._array};b.getItem=function(a){return-1<a&&a<this._array.length?this._array[a]:null};b.changeItem=function(a,b){-1<a&&a<this._array.length&&(this._array[a]=b,a>=this._startIndex&&a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(a),a))};b.setItem=function(a,b){this.changeItem(a,b)};b.addItem=function(a){this._array.push(a);this.array=this._array};b.addItemAt=function(a,b){this._array.splice(b,0,a);this.array=this._array};b.deleteItem=function(a){this._array.splice(a,1);this.array=this._array};b.getCell=function(a){this.runCallLater(this.changeCells);return-1<a&&this._cells?this._cells[(a-this._startIndex)%this._cells.length]:null};b.scrollTo=function(a){this._scrollBar?this._scrollBar.value=Math.floor(a/(this._isVertical?this.repeatX:this.repeatY))*this._cellSize:this.startIndex=a};b.tweenTo=function(a,b,c){void 0===b&&(b=200);this._scrollBar?(this._scrollBar.stopScroll(),y.to(this._scrollBar,{value:Math.floor(a/(this._isVertical?this.repeatX:this.repeatY))*this._cellSize},b,null,c,0,!0)):(this.startIndex=a,c&&c.run())};b._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))};b.commitMeasure=function(){this.runCallLater(this.changeCells)};c(0,b,"cacheAs",e.prototype._$get_cacheAs,function(a){f.superSet(l,this,"cacheAs",a);if(this._scrollBar)if(this._usedCache=null,"none"!==a)this._scrollBar.on("start",this,this.onScrollStart);else this._scrollBar.off("start",this,this.onScrollStart)});c(0,b,"content",function(){return this._content});c(0,b,"height",e.prototype._$get_height,function(a){a!=this._height&&(f.superSet(l,this,"height",a),this._setCellChanged())});c(0,b,"itemRender",function(){return this._itemRender},function(a){if(this._itemRender!=a){this._itemRender=a;for(a=this._cells.length-1;-1<a;a--)this._cells[a].destroy();this._cells.length=0;this._setCellChanged()}});c(0,b,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(a){this._removePreScrollBar();var b=new U;b.name="scrollBar";b.right=0;b.skin=a;b.elasticDistance=this._elasticEnabled?200:0;this.scrollBar=b;this.addChild(b);this._setCellChanged()});c(0,b,"page",function(){return this._page},function(a){this._page=a;this._array&&(this._page=0<a?a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)});c(0,b,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(a){this._removePreScrollBar();var b=new Q;b.name="scrollBar";b.bottom=0;b.skin=a;b.elasticDistance=this._elasticEnabled?200:0;this.scrollBar=b;this.addChild(b);this._setCellChanged()});c(0,b,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(a){this._repeatX=a;this._setCellChanged()});c(0,b,"scrollBar",function(){return this._scrollBar},function(a){this._scrollBar!=a&&(this._scrollBar=a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))});c(0,b,"width",e.prototype._$get_width,function(a){a!=this._width&&(f.superSet(l,this,"width",a),this._setCellChanged())});c(0,b,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(a){this._repeatY=a;this._setCellChanged()});c(0,b,"spaceX",function(){return this._spaceX},function(a){this._spaceX=a;this._setCellChanged()});c(0,b,"spaceY",function(){return this._spaceY},function(a){this._spaceY=a;this._setCellChanged()});c(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this._selectedIndex=a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(a),this.startIndex=this._startIndex)});c(0,b,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(a){this.selectedIndex=this._array.indexOf(a)});c(0,b,"length",function(){return this._array?this._array.length:0});c(0,b,"selection",function(){return this.getCell(this._selectedIndex)},function(a){this.selectedIndex=this._startIndex+this._cells.indexOf(a)});c(0,b,"startIndex",function(){return this._startIndex},function(a){this._startIndex=0<a?a:0;this.callLater(this.renderItems)});c(0,b,"array",function(){return this._array},function(a){this.runCallLater(this.changeCells);this._array=a||[];var b=this._preLen=this._array.length;this.totalPage=Math.ceil(b/(this.repeatX*this.repeatY));this._selectedIndex=this._selectedIndex<b?this._selectedIndex:b-1;this.startIndex=this._startIndex;this._scrollBar&&(this._scrollBar.stopScroll(),a=this._isVertical?this.repeatY:this.repeatX,b=Math.ceil(b/(this._isVertical?this.repeatX:this.repeatY)),1<(0<this._cellOffset?this.totalPage+1:this.totalPage)&&b>=a?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=a/b,this._scrollBar.setScroll(0,(b-a)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)});c(0,b,"dataSource",e.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.selectedIndex=parseInt(a):a instanceof Array?this.array=a:f.superSet(l,this,"dataSource",a)});c(0,b,"cells",function(){this.runCallLater(this.changeCells);return this._cells});c(0,b,"elasticEnabled",function(){return this._elasticEnabled},function(a){this._elasticEnabled=a;this._scrollBar&&(this._scrollBar.elasticDistance=a?200:0)});return d}(l),T=function(e){function d(a){this._skin=this._bg=null;d.__super.call(this);void 0===a&&(a="");this.text=a;this.skin=this.skin}h(d,"laya.ui.TextInput",e);var b=d.prototype;b.preinitialize=function(){this.mouseEnabled=!0};b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._bg&&this._bg.destroy();this._bg=null};b.createChildren=function(){this.addChild(this._tf=new ha);this._tf.padding=v.inputLabelPadding;this._tf.on("input",this,this._onInput);this._tf.on("enter",this,this._onEnter);this._tf.on("blur",this,this._onBlur);this._tf.on("focus",this,this._onFocus)};b._onFocus=function(){this.event("focus",this)};b._onBlur=function(){this.event("blur",this)};b._onInput=function(){this.event("input",this)};b._onEnter=function(){this.event("enter",this)};b.initialize=function(){this.width=128;this.height=22};b._skinLoaded=function(){this._bg||(this.graphics=this._bg=new J);this._bg.source=x.getRes(this._skin);this._width&&(this._bg.width=this._width);this._height&&(this._bg.height=this._height);this._sizeChanged();this.event("loaded")};b.select=function(){this._tf.select()};b.setSelection=function(a,b){this._tf.setSelection(a,b)};c(0,b,"text",e.prototype._$get_text,function(a){this._tf.text!=a&&(this._tf.text=a+"",this.event("change"))});c(0,b,"bg",function(){return this._bg},function(a){this.graphics=this._bg=a});c(0,b,"multiline",function(){return this._tf.multiline},function(a){this._tf.multiline=a});c(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?f.loader.load(this._skin,r.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});c(0,b,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(a){this._bg||(this.graphics=this._bg=new J);this._bg.sizeGrid=w.fillArray(v.defaultSizeGrid,a,Number)});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(D,this,"width",a);this._bg&&(this._bg.width=a)});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(D,this,"height",a);this._bg&&(this._bg.height=a)});c(0,b,"editable",function(){return this._tf.editable},function(a){this._tf.editable=a});c(0,b,"restrict",function(){return this._tf.restrict},function(a){this._tf.restrict=a});c(0,b,"prompt",function(){return this._tf.prompt},function(a){this._tf.prompt=a});c(0,b,"promptColor",function(){return this._tf.promptColor},function(a){this._tf.promptColor=a});c(0,b,"maxChars",function(){return this._tf.maxChars},function(a){this._tf.maxChars=a});c(0,b,"focus",function(){return this._tf.focus},function(a){this._tf.focus=a});c(0,b,"type",function(){return this._tf.type},function(a){this._tf.type=a});return d}(D),ta=function(e){function d(){this._oldH=this._oldW=0;d.__super.call(this)}h(d,"laya.ui.ScaleBox",e);var b=d.prototype;b.onEnable=function(){f.stage.on("resize",this,this.onResize);this.onResize()};b.onDisable=function(){f.stage.off("resize",this,this.onResize)};b.onResize=function(){if(0<this.width&&0<this.height){var a=Math.min(f.stage.width/this._oldW,f.stage.height/this._oldH);f.superSet(l,this,"width",f.stage.width);f.superSet(l,this,"height",f.stage.height);this.scale(a,a)}};c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(l,this,"width",a);this._oldW=a});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(l,this,"height",a);this._oldH=a});return d}(l),ia=function(e){function d(a,b){this._value=null;void 0===b&&(b="");d.__super.call(this,a,b)}h(d,"laya.ui.Radio",e);var b=d.prototype;b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._value=null};b.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this);this._autoSize=this.toggle=!1};b.initialize=function(){e.prototype.initialize.call(this);this.createText();this._text.align="left";this._text.valign="top";this._text.width=0;this.on("click",this,this.onClick)};b.onClick=function(a){this.selected=!0};c(0,b,"value",function(){return null!=this._value?this._value:this.label},function(a){this._value=a});return d}(z),Ga=function(e){function d(a,b){this._sheet=this._indexMap=this._valueArr=null;this._direction="horizontal";this._spaceY=this._spaceX=0;this._align="left";this._wordsH=this._wordsW=0;d.__super.call(this);a&&(this.skin=a);b&&(this.sheet=b)}h(d,"laya.ui.FontClip",e);var b=d.prototype;b.createChildren=function(){this._bitmap=new J;this.on("loaded",this,this._onClipLoaded)};b._onClipLoaded=function(){this.callLater(this.changeValue)};b.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear(!0);var a;if(a=this._sources[0]){var b="horizontal"===this._direction;b?(this._wordsW=this._valueArr.length*(a.sourceWidth+this.spaceX),this._wordsH=a.sourceHeight):(this._wordsW=a.sourceWidth,this._wordsH=(a.sourceHeight+this.spaceY)*this._valueArr.length);var c=0;if(this._width)switch(this._align){case "center":c=.5*(this._width-this._wordsW);break;case "right":c=this._width-this._wordsW;break;default:c=0}for(var d=0,e=this._valueArr.length;d<e;d++)a=this._indexMap[this._valueArr.charAt(d)],this.sources[a]&&(a=this.sources[a],b?this.graphics.drawImage(a,c+d*(a.sourceWidth+this.spaceX),0,a.sourceWidth,a.sourceHeight):this.graphics.drawImage(a,0+c,d*(a.sourceHeight+this.spaceY),a.sourceWidth,a.sourceHeight));this._width||(this._widget.resetLayoutX(),this.callLater(this._sizeChanged));this._height||(this._widget.resetLayoutY(),this.callLater(this._sizeChanged))}}};b.measureWidth=function(){return this._wordsW};b.measureHeight=function(){return this._wordsH};b.destroy=function(a){void 0===a&&(a=!0);this._indexMap=this._valueArr=null;this.graphics.clear(!0);this.removeSelf();this.off("loaded",this,this._onClipLoaded);e.prototype.destroy.call(this,a)};c(0,b,"sheet",function(){return this._sheet},function(a){this._sheet=a+="";a=a.split(" ");this._clipX=String(a[0]).length;this.clipY=a.length;this._indexMap={};for(var b=0;b<this._clipY;b++)for(var c=a[b].split(""),d=0,e=c.length;d<e;d++)this._indexMap[c[d]]=b*this._clipX+d});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(P,this,"height",a);this.callLater(this.changeValue)});c(0,b,"direction",function(){return this._direction},function(a){this._direction=a;this.callLater(this.changeValue)});c(0,b,"value",function(){return this._valueArr?this._valueArr:""},function(a){this._valueArr=a+"";this.callLater(this.changeValue)});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(P,this,"width",a);this.callLater(this.changeValue)});c(0,b,"spaceX",function(){return this._spaceX},function(a){this._spaceX=a;"horizontal"===this._direction&&this.callLater(this.changeValue)});c(0,b,"spaceY",function(){return this._spaceY},function(a){this._spaceY=a;"horizontal"!==this._direction&&this.callLater(this.changeValue)});c(0,b,"align",function(){return this._align},function(a){this._align=a;this.callLater(this.changeValue)});return d}(P);(function(c){function d(a){this.advsListArr=[];this.resUrl="https://unioncdn.layabox.com/config/iconlist.json";this._data=[];this._resquestTime=36E4;this._appid=null;this._playIndex=0;this._lunboTime=5E3;d.__super.call(this);this._http=new m.window.XMLHttpRequest;this.skin=a;this.setLoadUrl();this.init();this.size(120,120)}h(d,"laya.ui.AdvImage",c);var b=d.prototype;b.setLoadUrl=function(){m.onLimixiu&&(this.resUrl="https://abc.layabox.com/public/wyw/gconfig.json")};b.init=function(){this.isSupportJump()?((m.onMiniGame||m.onBDMiniGame)&&f.timer.loop(this._resquestTime,this,this.onGetAdvsListData),this.onGetAdvsListData(),this.initEvent()):this.visible=!1};b.initEvent=function(){this.on("click",this,this.onAdvsImgClick)};b.onAdvsImgClick=function(){this.getCurrentAppidObj()&&this.jumptoGame()};b.revertAdvsData=function(){if(this.advsListArr[this._playIndex])if(this.visible=!0,m.onLimixiu){this.visible=!0;var a=this.advsListArr[this._playIndex];if(a)if(m.onLimixiu&&GameStatusInfo.gameId==a.gameid)this.onLunbo();else this.skin="https://abc.layabox.com/public/icon/"+a.iconUrl,this.size(103,126)}else this.skin=this.advsListArr[this._playIndex]};b.isSupportJump=function(){if(m.onMiniGame)return"function"==typeof wx.navigateToMiniProgram;if(m.onLimixiu){if(BK.QQ.skipGame)return!0}else if(m.onBDMiniGame)return!0;return!1};b.jumptoGame=function(){var a=this,b=this.advsListArr[this._playIndex],c=parseInt(b.gameid),d=b.extendInfo;if(m.onLimixiu){if(!b.isLunBo&&!b.isLunBo){var e=B.getJSON("gameObj");e||(e={});e[b.gameid]||(e[b.gameid]={});e[b.gameid]={isclick:!0};B.setJSON("gameObj",e);this.advsListArr.splice(this._playIndex,1)}BK.QQ.skipGame(c,d);this.updateAdvsInfo()}else m.onMiniGame?this.isSupportJump()&&wx.navigateToMiniProgram({appId:this._appid,path:"",extraData:"",envVersion:"release",success:function(){console.log("-------------\u8df3\u8f6c\u6210\u529f--------------")},fail:function(){console.log("-------------\u8df3\u8f6c\u5931\u8d25--------------")},complete:function(){console.log("-------------\u8df3\u8f6c\u63a5\u53e3\u8c03\u7528\u6210\u529f--------------");a.updateAdvsInfo()}.bind(this)}):m.onBDMiniGame||(this.visible=!1)};b.updateAdvsInfo=function(){this.visible=!1;this.onLunbo();f.timer.loop(this._lunboTime,this,this.onLunbo)};b.onLunbo=function(){this._playIndex=this._playIndex>=this.advsListArr.length-1?0:this._playIndex+1;this.visible=!0;this.revertAdvsData()};b.getCurrentAppidObj=function(){return this.advsListArr[this._playIndex]};b.onGetAdvsListData=function(){var a=this,b=d.randRange(1E4,1E6);this._http.open("get",this.resUrl+"?"+b,!0);this._http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._http.responseType="text";this._http.onerror=function(b){a._onError(b)};this._http.onload=function(b){a._onLoad(b)};this._http.send(null)};b._onError=function(a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)};b._onLoad=function(a){a=this._http;var b=void 0!==a.status?a.status:200;200===b||204===b||0===b?this.complete():this.error("["+a.status+"]"+a.statusText+":"+a.responseURL)};b.error=function(a){this.event("error",a)};b.complete=function(){try{this._data=this._http.response||this._http.responseText,this._data=JSON.parse(this._data),m.onLimixiu?(this.advsListArr=this.getAdvsQArr(this._data),this.advsListArr.length?(this.updateAdvsInfo(),this.revertAdvsData()):this.visible=!1):(this.advsListArr=this._data.list,this._appid=this._data.appid,this.updateAdvsInfo(),this.revertAdvsData())}catch(a){this.error(a.message)}};b.getAdvsQArr=function(a){var b=[],c=B.getJSON("gameObj"),d;for(d in a){var e=a[d];c&&c[e.gameid]&&!e.isQiangZhi||b.push(e)}return b};b.clear=function(){var a=this._http;a.onerror=a.onabort=a.onprogress=a.onload=null};b.destroy=function(a){f.timer.clear(this,this.onLunbo);c.prototype.destroy.call(this,!0);this.clear();f.timer.clear(this,this.onGetAdvsListData)};d.randRange=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};return d})(C);var U=function(c){function d(){d.__super.call(this)}h(d,"laya.ui.VScrollBar",c);return d}(ea),Ca=function(c){function d(){d.__super.call(this)}h(d,"laya.ui.VSlider",c);return d}(S),Q=function(c){function d(){d.__super.call(this)}h(d,"laya.ui.HScrollBar",c);d.prototype.initialize=function(){c.prototype.initialize.call(this);this.slider.isVertical=!1};return d}(ea),wa=function(c){function d(b){d.__super.call(this,b);this.isVertical=!1}h(d,"laya.ui.HSlider",c);return d}(S),Ea=function(e){function d(){d.__super.call(this)}h(d,"laya.ui.HBox",e);var b=d.prototype;b.sortItem=function(a){a&&a.sort(function(a,b){return a.x-b.x})};b.changeItems=function(){this._itemChanged=!1;for(var a=[],b=0,c=0,d=this.numChildren;c<d;c++){var e=this.getChildAt(c);e&&(a.push(e),b=this._height?this._height:Math.max(b,e.height*e.scaleY))}this.sortItem(a);for(var f=0,c=0,d=a.length;c<d;c++)e=a[c],e.x=f,f+=e.width*e.scaleX+this._space,"top"==this._align?e.y=0:"middle"==this._align?e.y=.5*(b-e.height*e.scaleY):"bottom"==this._align&&(e.y=b-e.height*e.scaleY);this._sizeChanged()};c(0,b,"height",e.prototype._$get_height,function(a){this._height!=a&&(f.superSet(W,this,"height",a),this.callLater(this.changeItems))});d.NONE="none";d.TOP="top";d.MIDDLE="middle";d.BOTTOM="bottom";return d}(W),za=function(c){function d(){d.__super.call(this)}h(d,"laya.ui.RadioGroup",c);d.prototype.createItem=function(b,a){return new ia(b,a)};return d}(M),Fa=function(e){function d(){d.__super.call(this)}h(d,"laya.ui.VBox",e);var b=d.prototype;b.changeItems=function(){this._itemChanged=!1;for(var a=[],b=0,c=0,d=this.numChildren;c<d;c++){var e=this.getChildAt(c);e&&(a.push(e),b=this._width?this._width:Math.max(b,e.width*e.scaleX))}this.sortItem(a);for(var f=0,c=0,d=a.length;c<d;c++)e=a[c],e.y=f,f+=e.height*e.scaleY+this._space,"left"==this._align?e.x=0:"center"==this._align?e.x=.5*(b-e.width*e.scaleX):"right"==this._align&&(e.x=b-e.width*e.scaleX);this._sizeChanged()};c(0,b,"width",e.prototype._$get_width,function(a){this._width!=a&&(f.superSet(W,this,"width",a),this.callLater(this.changeItems))});d.NONE="none";d.LEFT="left";d.CENTER="center";d.RIGHT="right";return d}(W),ra=function(e){function d(a){this._hScrollBar=this._vScrollBar=null;void 0===a&&(a="");d.__super.call(this,a);this.on("change",this,this._onTextChange)}h(d,"laya.ui.TextArea",e);var b=d.prototype;b._onTextChange=function(){this.callLater(this.changeScroll)};b.destroy=function(a){void 0===a&&(a=!0);e.prototype.destroy.call(this,a);this._vScrollBar&&this._vScrollBar.destroy();this._hScrollBar&&this._hScrollBar.destroy();this._hScrollBar=this._vScrollBar=null};b.initialize=function(){this.width=180;this.height=150;this.multiline=this._tf.wordWrap=!0};b.onVBarChanged=function(a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)};b.onHBarChanged=function(a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)};b.changeScroll=function(){var a=this._vScrollBar&&0<this._tf.maxScrollY,b=this._hScrollBar&&0<this._tf.maxScrollX,c=a?this._width-this._vScrollBar.width:this._width,d=b?this._height-this._hScrollBar.height:this._height,e=this._tf.padding||v.labelPadding;this._tf.width=c;this._tf.height=d;this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-e[2],this._vScrollBar.y=e[1],this._vScrollBar.height=this._height-(b?this._hScrollBar.height:0)-e[1]-e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=d/Math.max(this._tf.textHeight,d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=a);this._hScrollBar&&(this._hScrollBar.x=e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-e[3],this._hScrollBar.width=this._width-(a?this._vScrollBar.width:0)-e[0]-e[2],this._hScrollBar.scrollSize=Math.max(.033*c,1),this._hScrollBar.thumbPercent=c/Math.max(this._tf.textWidth,c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=b)};b.scrollTo=function(a){this.commitMeasure();this._tf.scrollY=a};c(0,b,"scrollY",function(){return this._tf.scrollY});c(0,b,"width",e.prototype._$get_width,function(a){f.superSet(T,this,"width",a);this.callLater(this.changeScroll)});c(0,b,"hScrollBar",function(){return this._hScrollBar});c(0,b,"height",e.prototype._$get_height,function(a){f.superSet(T,this,"height",a);this.callLater(this.changeScroll)});c(0,b,"maxScrollX",function(){return this._tf.maxScrollX});c(0,b,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new U),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll));this._vScrollBar.skin=a});c(0,b,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new Q),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll));this._hScrollBar.skin=a});c(0,b,"vScrollBar",function(){return this._vScrollBar});c(0,b,"maxScrollY",function(){return this._tf.maxScrollY});c(0,b,"scrollX",function(){return this._tf.scrollX});return d}(T),Aa=function(c){function d(){d.__super.call(this)}h(d,"laya.ui.Tab",c);d.prototype.createItem=function(b,a){return new z(b,a)};return d}(M);f.__init([Y,V])})(window,document,Laya);